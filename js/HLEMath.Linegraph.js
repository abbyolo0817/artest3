/*! package version: 1.0.202503041437 */
!function(t){var e=window.webpackHotUpdate;window.webpackHotUpdate=function(t,n){!function(t,e){if(!E[t]||!w[t])return;for(var n in w[t]=!1,e)Object.prototype.hasOwnProperty.call(e,n)&&(p[n]=e[n]);0==--m&&0===b&&O()}(t,n),e&&e(t,n)};var n,r=!0,i="b60b48608a7ab6cee7cb",o={},a=[],l=[];function s(t){var e=A[t];if(!e)return _;var r=function(r){return e.hot.active?(A[r]?-1===A[r].parents.indexOf(t)&&A[r].parents.push(t):(a=[t],n=r),-1===e.children.indexOf(r)&&e.children.push(r)):a=[],_(r)},i=function(t){return{configurable:!0,enumerable:!0,get:function(){return _[t]},set:function(e){_[t]=e}}};for(var o in _)Object.prototype.hasOwnProperty.call(_,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(t){return"ready"===h&&f("prepare"),b++,_.e(t).then(e,(function(t){throw e(),t}));function e(){b--,"prepare"===h&&(g[t]||k(t),0===b&&0===m&&O())}},r.t=function(t,e){return 1&e&&(t=r(t)),_.t(t,-2&e)},r}function u(e){var r={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(t,e){if(void 0===t)r._selfAccepted=!0;else if("function"==typeof t)r._selfAccepted=t;else if("object"==typeof t)for(var n=0;n<t.length;n++)r._acceptedDependencies[t[n]]=e||function(){};else r._acceptedDependencies[t]=e||function(){}},decline:function(t){if(void 0===t)r._selfDeclined=!0;else if("object"==typeof t)for(var e=0;e<t.length;e++)r._declinedDependencies[t[e]]=!0;else r._declinedDependencies[t]=!0},dispose:function(t){r._disposeHandlers.push(t)},addDisposeHandler:function(t){r._disposeHandlers.push(t)},removeDisposeHandler:function(t){var e=r._disposeHandlers.indexOf(t);e>=0&&r._disposeHandlers.splice(e,1)},invalidate:function(){switch(this._selfInvalidated=!0,h){case"idle":(p={})[e]=t[e],f("ready");break;case"ready":P(e);break;case"prepare":case"check":case"dispose":case"apply":(v=v||[]).push(e)}},check:S,apply:C,status:function(t){if(!t)return h;c.push(t)},addStatusHandler:function(t){c.push(t)},removeStatusHandler:function(t){var e=c.indexOf(t);e>=0&&c.splice(e,1)},data:o[e]};return n=void 0,r}var c=[],h="idle";function f(t){h=t;for(var e=0;e<c.length;e++)c[e].call(null,t)}var d,p,y,v,m=0,b=0,g={},w={},E={};function x(t){return+t+""===t?+t:t}function S(t){if("idle"!==h)throw new Error("check() is only allowed in idle status");return r=t,f("check"),(e=1e4,e=e||1e4,new Promise((function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=_.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=e,r.send(null)}catch(t){return n(t)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(t){return void n(t)}t(e)}}}))).then((function(t){if(!t)return f(j()?"ready":"idle"),null;w={},g={},E=t.c,y=t.h,f("prepare");var e=new Promise((function(t,e){d={resolve:t,reject:e}}));p={};return k(0),"prepare"===h&&0===b&&0===m&&O(),e}));var e}function k(t){E[t]?(w[t]=!0,m++,function(t){var e=document.createElement("script");e.charset="utf-8",e.src=_.p+""+t+"."+i+".hot-update.js",document.head.appendChild(e)}(t)):g[t]=!0}function O(){f("ready");var t=d;if(d=null,t)if(r)Promise.resolve().then((function(){return C(r)})).then((function(e){t.resolve(e)}),(function(e){t.reject(e)}));else{var e=[];for(var n in p)Object.prototype.hasOwnProperty.call(p,n)&&e.push(x(n));t.resolve(e)}}function C(t){if("ready"!==h)throw new Error("apply() is only allowed in ready status");return T(t=t||{})}function T(e){var r,l,s,u,c;function h(t){for(var e=[t],n={},r=e.map((function(t){return{chain:[t],id:t}}));r.length>0;){var i=r.pop(),o=i.id,a=i.chain;if((u=A[o])&&(!u.hot._selfAccepted||u.hot._selfInvalidated)){if(u.hot._selfDeclined)return{type:"self-declined",chain:a,moduleId:o};if(u.hot._main)return{type:"unaccepted",chain:a,moduleId:o};for(var l=0;l<u.parents.length;l++){var s=u.parents[l],c=A[s];if(c){if(c.hot._declinedDependencies[o])return{type:"declined",chain:a.concat([s]),moduleId:o,parentId:s};-1===e.indexOf(s)&&(c.hot._acceptedDependencies[o]?(n[s]||(n[s]=[]),d(n[s],[o])):(delete n[s],e.push(s),r.push({chain:a.concat([s]),id:s})))}}}}return{type:"accepted",moduleId:t,outdatedModules:e,outdatedDependencies:n}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];-1===t.indexOf(r)&&t.push(r)}}j();var m={},b=[],g={},w=function(){};for(var S in p)if(Object.prototype.hasOwnProperty.call(p,S)){var k;c=x(S);var O=!1,C=!1,P=!1,B="";switch((k=p[S]?h(c):{type:"disposed",moduleId:S}).chain&&(B="\nUpdate propagation: "+k.chain.join(" -> ")),k.type){case"self-declined":e.onDeclined&&e.onDeclined(k),e.ignoreDeclined||(O=new Error("Aborted because of self decline: "+k.moduleId+B));break;case"declined":e.onDeclined&&e.onDeclined(k),e.ignoreDeclined||(O=new Error("Aborted because of declined dependency: "+k.moduleId+" in "+k.parentId+B));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(k),e.ignoreUnaccepted||(O=new Error("Aborted because "+c+" is not accepted"+B));break;case"accepted":e.onAccepted&&e.onAccepted(k),C=!0;break;case"disposed":e.onDisposed&&e.onDisposed(k),P=!0;break;default:throw new Error("Unexception type "+k.type)}if(O)return f("abort"),Promise.reject(O);if(C)for(c in g[c]=p[c],d(b,k.outdatedModules),k.outdatedDependencies)Object.prototype.hasOwnProperty.call(k.outdatedDependencies,c)&&(m[c]||(m[c]=[]),d(m[c],k.outdatedDependencies[c]));P&&(d(b,[k.moduleId]),g[c]=w)}var M,R=[];for(l=0;l<b.length;l++)c=b[l],A[c]&&A[c].hot._selfAccepted&&g[c]!==w&&!A[c].hot._selfInvalidated&&R.push({module:c,parents:A[c].parents.slice(),errorHandler:A[c].hot._selfAccepted});f("dispose"),Object.keys(E).forEach((function(t){!1===E[t]&&function(t){delete installedChunks[t]}(t)}));for(var I,L,H=b.slice();H.length>0;)if(c=H.pop(),u=A[c]){var D={},N=u.hot._disposeHandlers;for(s=0;s<N.length;s++)(r=N[s])(D);for(o[c]=D,u.hot.active=!1,delete A[c],delete m[c],s=0;s<u.children.length;s++){var F=A[u.children[s]];F&&((M=F.parents.indexOf(c))>=0&&F.parents.splice(M,1))}}for(c in m)if(Object.prototype.hasOwnProperty.call(m,c)&&(u=A[c]))for(L=m[c],s=0;s<L.length;s++)I=L[s],(M=u.children.indexOf(I))>=0&&u.children.splice(M,1);for(c in f("apply"),void 0!==y&&(i=y,y=void 0),p=void 0,g)Object.prototype.hasOwnProperty.call(g,c)&&(t[c]=g[c]);var V=null;for(c in m)if(Object.prototype.hasOwnProperty.call(m,c)&&(u=A[c])){L=m[c];var Y=[];for(l=0;l<L.length;l++)if(I=L[l],r=u.hot._acceptedDependencies[I]){if(-1!==Y.indexOf(r))continue;Y.push(r)}for(l=0;l<Y.length;l++){r=Y[l];try{r(L)}catch(t){e.onErrored&&e.onErrored({type:"accept-errored",moduleId:c,dependencyId:L[l],error:t}),e.ignoreErrored||V||(V=t)}}}for(l=0;l<R.length;l++){var X=R[l];c=X.module,a=X.parents,n=c;try{_(c)}catch(t){if("function"==typeof X.errorHandler)try{X.errorHandler(t)}catch(n){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:c,error:n,originalError:t}),e.ignoreErrored||V||(V=n),V||(V=t)}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:c,error:t}),e.ignoreErrored||V||(V=t)}}return V?(f("fail"),Promise.reject(V)):v?T(e).then((function(t){return b.forEach((function(e){t.indexOf(e)<0&&t.push(e)})),t})):(f("idle"),new Promise((function(t){t(b)})))}function j(){if(v)return p||(p={}),v.forEach(P),v=void 0,!0}function P(e){Object.prototype.hasOwnProperty.call(p,e)||(p[e]=t[e])}var A={};function _(e){if(A[e])return A[e].exports;var n=A[e]={i:e,l:!1,exports:{},hot:u(e),parents:(l=a,a=[],l),children:[]};return t[e].call(n.exports,n,n.exports,s(e)),n.l=!0,n.exports}_.m=t,_.c=A,_.d=function(t,e,n){_.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},_.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},_.t=function(t,e){if(1&e&&(t=_(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(_.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)_.d(n,r,function(e){return t[e]}.bind(null,r));return n},_.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return _.d(e,"a",e),e},_.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},_.p="",_.h=function(){return i},s(0)(_.s=0)}([function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.r(e);var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"hexToRgba",value:function(e,n){var r=t.hexToRgb(e);return"rgba("+[r.r,r.g,r.b,n].join(",")+")"}},{key:"hexToRgb",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},{key:"rgbToHex",value:function(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)}},{key:"rgbToHsv",value:function(t,e,n){t/=255,e/=255,n/=255;var r,i,o=Math.max(t,e,n),a=Math.min(t,e,n),l=o,s=o-a;if(i=0==o?0:s/o,o==a)r=0;else{switch(o){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return[r,i,l]}},{key:"hsvToRgb",value:function(t,e,n){var r=0,i=0,o=0,a=e/100,l=n/100,s=Math.floor(t/60)%6,u=t/60-Math.floor(t/60),c=l*(1-a),h=l*(1-u*a),f=l*(1-(1-u)*a);switch(s){case 0:r=l,i=f,o=c;break;case 1:r=h,i=l,o=c;break;case 2:r=c,i=l,o=f;break;case 3:r=c,i=h,o=l;break;case 4:r=f,i=c,o=l;break;case 5:r=l,i=c,o=h}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}}],(n=null)&&r(e.prototype,n),i&&r(e,i),t}();function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=p(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=p(t);if(e){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(t){c(n,t);var e=f(n);function n(t,r){var i;return l(this,n),(i=e.call(this,t,r)).className="LineFree",i}return u(n,[{key:"mousedown",value:function(t,e){a(p(n.prototype),"mousedown",this).call(this,t,e);var r=this.nowPos,i=(this.lastPos,this.shape),o=this.lineWidth,l=this.lineColor;if(this.oldMidPt=this.nowPos.clone(),null!=i){this.shape.tool=this;var s=i.graphics;s.setStrokeStyle(o,"round","round"),s.beginStroke(l),s.moveTo(r.x,r.y)}}},{key:"mousemove",value:function(t,e){if(a(p(n.prototype),"mousemove",this).call(this,t,e),null!=this.shape){var r=new createjs.Point(this.lastPos.x+this.nowPos.x>>1,this.lastPos.y+this.nowPos.y>>1);this.shape.graphics.moveTo(r.x,r.y).curveTo(this.lastPos.x,this.lastPos.y,this.oldMidPt.x,this.oldMidPt.y),this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y,this.oldMidPt.x=r.x,this.oldMidPt.y=r.y,this.shape.stage.update()}}},{key:"mouseup",value:function(t){a(p(n.prototype),"mouseup",this).call(this,t),null!=this.shape&&this.shape.graphics.endStroke()}}]),n}(function(t){c(n,createjs.EventDispatcher);var e=f(n);function n(t,r){var o;return l(this,n),(o=e.call(this)).container=t,o.shape=r,o.nowPos=new createjs.Point,o.lastPos=new createjs.Point,o.lineWidth=5,o.lineColorDefault="#FF0000",o.lineColor=i.hexToRgba(o.lineColorDefault,1),o}return u(n,[{key:"mousedown",value:function(t,e){if(null!=this.shape){var n=this.shape.globalToLocal(t,e);this.nowPos.x=n.x/1,this.nowPos.y=n.y/1,this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y,this.shape.points=[],this.shape.points.push(new createjs.Point(this.nowPos.x,this.nowPos.y)),this.pointPos=this.shape.points.length-1}}},{key:"mousemove",value:function(t,e){if(null!=this.shape){var n=this.shape.globalToLocal(t,e);this.nowPos.x=n.x/1,this.nowPos.y=n.y/1,this.shape.points.push(new createjs.Point(this.nowPos.x,this.nowPos.y))}}},{key:"mouseup",value:function(){this.calcBounds()}},{key:"calcBounds",value:function(){var t=NaN,e=NaN,n=NaN,r=NaN;(this.shape.points||[]).forEach((function(i){(isNaN(t)||t>i.x)&&(t=i.x),(isNaN(n)||n<i.x)&&(n=i.x),(isNaN(e)||e>i.y)&&(e=i.y),(isNaN(r)||r<i.y)&&(r=i.y)})),this.setBounds(t,e,n-t,r-e)}},{key:"setBounds",value:function(t,e,n,r){var i=this.shape;i&&(t=0<n?t:t+n,e=0<r?e:e+r,i.setBounds(t,e,Math.abs(n),Math.abs(r)))}}]),n}());function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.name="pen",this.container=e}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e){var n=this.container;return new y(n,e)}}])&&v(e.prototype,n),r&&v(e,r),t}();function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function x(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),t}var S=function(){function t(e,n){w(this,t),this.container=e,this.shapeContainer=n,this.nowPos=new createjs.Point,this.lastPos=new createjs.Point,this.needRemoveObjs=null,this.lineColor=""}return x(t,[{key:"init",value:function(t){return this.shape=t||this.shape,this}},{key:"mousedown",value:function(t,e){this.shapeContainer&&(this.shape=this.shapeContainer.addChild(new createjs.Shape)),null!=this.shape&&(this.nowPos=this.shape.globalToLocal(t,e),this.lastPos.x=this.nowPos.x,this.lastPos.y=this.nowPos.y)}},{key:"mousemove",value:function(t,e){if(null!=this.shape){this.nowPos=this.shape.globalToLocal(t,e);var n=this.lastPos,r=this.nowPos,i=r.x-n.x,o=r.y-n.y,a=this.shape.graphics;a.clear(),a.setStrokeStyle(1,"round","round"),a.beginStroke(createjs.Graphics.getRGB("0x00FF00",1)),a.beginFill(createjs.Graphics.getRGB("0xFFFFFF",.5)),a.drawRect(n.x,n.y,i,o),a.endFill()}}},{key:"mouseup",value:function(){if(null!=this.shape){var t=this.nowPos.x<this.lastPos.x?this.nowPos.x:this.lastPos.x,e=this.nowPos.y<this.lastPos.y?this.nowPos.y:this.lastPos.y,n=Math.abs(this.nowPos.x-this.lastPos.x),r=Math.abs(this.nowPos.y-this.lastPos.y);this.shape.parent.removeChild(this.shape),this.shape=null;for(var i=new createjs.Rectangle(t,e,n,r),o=this.getRectObjects(i),a=0,l=o.length;a<l;a++)o[a].parent.removeChild(o[a])}}},{key:"getRectObjects",value:function(t){for(var e=this.shapeContainer.children,n=e.length,r=[],i=(t.x,t.width,t.y,t.height,0);i<n;i++)e[i].points&&this._isPointInRect(e[i].points,t)&&r.unshift(e[i]);return r}},{key:"_isPointInRect",value:function(t,e){var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.x<i.x&&i.x<e.x+e.width&&e.y<i.y&&i.y<e.y+e.height)return!0}}catch(t){r.e(t)}finally{r.f()}return!1}}]),t}(),k="mouse",O="LineFree",C="RectEraser";function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var P=["#F20000","#FF7F27","#FFFF01","#22B14C","#00A2E8","#A349A4"];var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,r=[{key:"getHtmlParams",value:function(t){var e=new Object;if(-1!=t.indexOf("?"))for(var n=decodeURI(t.substr(1)).split("&"),r=0;r<n.length;r++)e[n[r].split("=")[0]]=unescape(n[r].split("=")[1]);return e}},{key:"libCloneItem",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var r=t.an.getComposition(t.anid).getLibrary(),i=new r[e];if(i.gotoAndStop(0),null!=n)for(var o in n)i[o]=n[o];return i}catch(t){}return null}}],(n=null)&&T(e.prototype,n),r&&T(e,r),t}();function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}j(A,"isDemo",!0),j(A,"sceneHistory",[]),j(A,"htmlParams",{}),j(A,"drawBoard",null),j(A,"penColorIndex",0),j(A,"appMain",null),j(A,"exportRoot",null),j(A,"anid",null),j(A,"cjs",null),j(A,"an",null),j(A,"theme",0),j(A,"type",0),j(A,"isEntrySub",!1);var M=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,n&&n.gotoAndStop(0),this.cursor=n,this.states=[t.DEFAULT],this.enbale=!1}var e,n,r;return e=t,(n=[{key:"moveTo",value:function(t,e){var n=this.cursor;if(null!=n){n.x=t,n.y=e;var r=n.parent;r.getChildIndex(n)!=r.children.length-1&&r.setChildIndex(n,r.children.length-1)}}},{key:"reset",value:function(){this.states.length>1&&this.states.shift(),this.setCursor(this.states[0])}},{key:"setEnable",value:function(e){this.enbale!=e&&(this.enbale=e,null!=this.cursor&&(this.cursor.visible=this.states[0]<t.DEFAULT&&e))}},{key:"setType",value:function(e){this._pushState(e),e<t.DEFAULT&&null!=this.cursor&&this.cursor.gotoAndStop(e)}},{key:"_pushState",value:function(t){this.states[0]!=t&&this.states.unshift(t)}}])&&_(e.prototype,n),r&&_(e,r),t}();function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}B(M,"DEFAULT",100),B(M,"ARROW",101),B(M,"PEN",0),B(M,"ERASER",1);var I=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cjs=e,this.an=n,this.exportRoot=r,this.id=i,r&&r.gotoAndStop(0),this.handleEvtBind=this.handleEvt.bind(this),this._mouseEnabled=!1,Object.defineProperty(this,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t,this.container.mouseChildren=t,this.container.mouseEnabled=t,this.drawStage&&this.drawStage!=this.exportRoot.stage&&(this.drawStage.canvas.style.pointerEvents=t?"auto":"none")}}),Object.defineProperty(this,"logEnabled",{get:function(){return this.drawStage&&this.drawStage.text},set:function(t){this.drawStage&&this.logSetup(t)}})}var e,n,r;return e=t,(n=[{key:"clearAll",value:function(){this._recycle()}},{key:"selectTool",value:function(t){this._seletTool(t)}},{key:"setLineColor",value:function(t){this.lineColor=i.hexToRgba(t,1)}},{key:"init",value:function(t){var e=t.canvasName;this.drawWidth=t.drawWidth||1280,this.drawHeight=t.drawHeight||720,this.cursor=new M(this,t.cursor||null),this.isDown=!1,this.isMove=!1,this.nowX=0,this.nowY=0,this.lastFrameRate=null,this.drawStage=e?this.initCanvas(e,this.exportRoot.stage):this.exportRoot.stage,this.stageSetup(this.drawStage,this.handleEvtBind),this.logEnabled&&this.logSetup(!0);var n=this.exportRoot||this.drawStage.addChild(new createjs.Container);this.container=n,this.hitAreaMC=n.addChild(this._createBackground(this.drawWidth,this.drawHeight,"rgba(255,255,255,0.01)")),this.hitAreaMC.addEventListener("mousedown",(function(t){})),this.hitAreaMC.cursor="none",this.shapeContainer=n.addChild(new createjs.Container),this.shapeContainer.mouseEnabled=!1,this.shapeContainer.mouseChildren=!1,this.shapeContainer.mask=this._createBackground(this.drawWidth,this.drawHeight,"rgba(255,255,255,1)"),this.shapeID=0,this.curShape=null,this.curTool=null,this.setLineColor("#FF0000"),this.selectTool()}},{key:"initCanvas",value:function(t,e){var n=t||"drawCanvas",r=document.createElement("canvas");r.setAttribute("id",n),r.setAttribute("width",canvas.getAttribute("width")),r.setAttribute("height",canvas.getAttribute("width")),r.setAttribute("style",canvas.getAttribute("style")),r.style.backgroundColor="rgba(255,255,255,0)",this.insertAfter(r,canvas);var i=new createjs.Stage(n);function o(){r.width=canvas.width,r.height=canvas.height,r.style.width=canvas.style.width,r.style.height=canvas.style.height,i.scaleX=e.scaleX,i.scaleY=e.scaleY,i.tickOnUpdate=!1,i.update(),i.tickOnUpdate=!0}return i.enableMouseOver(),i.nextStage=e,createjs.Ticker.addEventListener("tick",i),window.addEventListener("resize",o),o(),i}},{key:"insertAfter",value:function(t,e){var n=e.parentNode;return n.lastChild==e?n.appendChild(t):n.insertBefore(t,e.nextSibling)}},{key:"stageSetup",value:function(t,e){return t.addEventListener("stagemousedown",e),t.addEventListener("stagemouseup",e),t.addEventListener("stagemousemove",e),t.addEventListener("mouseleave",e),t.addEventListener("mouseenter",e),t}},{key:"logSetup",value:function(t){var e=this.drawStage;e&&(e.log=[],e.text=e.addChild(new createjs.Text("","15px monospace","#111")).set({x:30,y:30,lineHeight:16.7}),e.text.visible=t)}},{key:"handleEvt",value:function(t){if(this.mouseEnabled&&t.primary){var e=this.drawStage;if(this.logEnabled){t.target;var n=(e=this.drawStage).log;for(n.push(t.type+" x:"+t.stageX.toFixed(0)+" y:"+t.stageY.toFixed(0));n.length>12;)n.shift();e.text.text=n.join("\n")}switch(t.type){case"mouseenter":case"mouseover":case"mouseout":break;case"stagemousedown":this.handleMouseDown(e.mouseX,e.mouseY);break;case"stagemouseup":this.handleMouseUp(e.mouseX,e.mouseY);break;case"stagemousemove":this.handleMouseMove(e.mouseX,e.mouseY)}}}},{key:"handleMouseDown",value:function(t,e){if(this.curTool){var n=this.drawStage,r=t/n.scaleX,i=e/n.scaleY;if(0==this.isDown&&this.hitAreaMC.hitTest(r,i)){this.isDown=!0,this.nowX=t,this.nowY=e;var o=this.curTool,a=this.curShape,l=this.shapeContainer;o.className==O&&(null==a&&((a=l.addChild(new createjs.Shape)).name="shape_"+ ++this.shapeID,a.x=0,a.y=0,this.curShape=a),o.shape=a,o.lineColor=this.lineColor,this.lastFrameRate=createjs.Ticker.frameRate),o&&o.mousedown(t,e),this.cursor.setEnable(!0),this.cursor.moveTo(r,i),0==createjs.Ticker.frameRate&&n.update()}}}},{key:"handleMouseUp",value:function(t,e){if(this.curTool&&1==this.isDown){var n=this.curTool;n&&n.mouseup(),this.curShape=null,this.isMove=!1,this.isDown=!1,this.cursor.cursor.stage&&1==createjs.Touch.isSupported()&&this.cursor.setEnable(!1),null!=this.lastFrameRate&&(createjs.Ticker.frameRate=this.lastFrameRate,this.lastFrameRate=null)}}},{key:"handleMouseMove",value:function(t,e){if(this.curTool){var n=this.drawStage,r=t/n.scaleX,i=e/n.scaleY;if(1==this.hitAreaMC.hitTest(r,i)){if(this.cursor.moveTo(r,i),1==this.isDown&&(Math.abs(t-this.nowX)>1||Math.abs(e-this.nowY.y)>1)){var o=this.curTool;o&&o.mousemove(t,e),this.isMove=!0,this.nowX=t,this.nowY=e}}else this.cursor.moveTo(r,-1e3);0==createjs.Ticker.frameRate&&n.update()}}},{key:"_createBackground",value:function(t,e,n){var r=new createjs.Shape;return r.graphics.beginFill(n||"rgba(255,255,255,0.01)"),r.graphics.drawRect(0,0,t,e),r.graphics.endFill(),r}},{key:"_recycle",value:function(){this.curTool&&this.curTool.shape&&(this.curTool.shape=null),this.curShape=null,this.shapeContainer&&this.shapeContainer.removeAllChildren()}},{key:"_seletTool",value:function(t){switch(t){case O:this.curTool=new m(this,this.curShape).init(),this.cursor.setType(M.PEN),this.cursor.setEnable(!0),this.hitAreaMC.visible=!0,this.mouseEnabled=!0;break;case C:this.curTool=new S(this,this.shapeContainer).init(),this.cursor.setType(M.ERASER),this.cursor.setEnable(!0),this.hitAreaMC.visible=!0,this.mouseEnabled=!0;break;default:this.curTool=null,this.cursor.setType(M.ARROW),this.cursor.setEnable(!1),this.hitAreaMC.visible=!1,this.mouseEnabled=!1}}}])&&R(e.prototype,n),r&&R(e,r),t}(),L=["#F20000","#FF7F27","#FFFF01","#22B14C","#00A2E8","#A349A4"],H=L;function D(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var V=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handle=e,this.exportRoot=n,n&&(n.gotoAndStop(0),this.init()),Object.defineProperty(this,"visible",{get:function(){return this.exportRoot&&this.exportRoot.visible},set:function(t){this.exportRoot.visible=t}}),this._selectedIndex=0,Object.defineProperty(this,"selectedIndex",{get:function(){return this._selectedIndex},set:function(t){this._selectedIndex=t,this._updateFocus()}}),this.onSelectedEvent=[]}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this.colorObjs=[];var e,n=this.exportRoot,r=0,i=D(n.children);try{for(i.s();!(e=i.n()).done;){e.value;var o=n.getChildByName("btn_"+ ++r);if(!o)break;o instanceof createjs.MovieClip&&(o.gotoAndStop(0),o.cursor="pointer",o.mouseChildren=!1),o.addEventListener("mousedown",(function(e){t.onClickBtn(e)})),this.colorObjs.push(o)}}catch(t){i.e(t)}finally{i.f()}this.exportRoot.getChildAt(0).addEventListener("mousedown",(function(t){})),this.focus=this.exportRoot.getChildByName("focus"),this._initColors(),this.hide(),this._checkHideBind=this._checkHide.bind(this)}},{key:"onClickBtn",value:function(t){var e=t.currentTarget,n=e&&e.name?e.name.split("_"):null;if(n){this.selectedIndex=parseInt(n[1],10)-1,this._updateFocus();var r,i=D(this.onSelectedEvent);try{for(i.s();!(r=i.n()).done;){var o=r.value;null!=o&&o(t)}}catch(t){i.e(t)}finally{i.f()}}}},{key:"show",value:function(){this.exportRoot.visible=!0,this.exportRoot.parent.setChildIndex(this.exportRoot,this.exportRoot.parent.children.length-1),this.exportRoot.stage.addEventListener("stagemousedown",this._checkHideBind,!0)}},{key:"hide",value:function(){this.exportRoot.visible=!1,this.exportRoot.stage.removeEventListener("stagemousedown",this._checkHideBind,!0),this.stopEvent&&(this.stopEvent.removeEventListener("mousedown",this._checkHideBind),this.stopEvent.parent.removeChild(this.stopEvent),this.stopEvent=null)}},{key:"_initColors",value:function(){for(var t=this.colorObjs,e=0,n=t.length;e<n;e++){var r=t[e],o=i.hexToRgb(H[e]);r.filters=[new createjs.ColorFilter(o.r/255,o.g/255,o.b/255,1)],r.nominalBounds&&r.cache(r.nominalBounds.x,r.nominalBounds.y,r.nominalBounds.width,r.nominalBounds.height)}}},{key:"_checkHide",value:function(t){this.exportRoot.visible&&0==this.exportRoot.hitTest(t.stageX,t.stageY)&&(this.hide(),A.drawBoard.mouseEnabled=!0)}},{key:"_updateFocus",value:function(){this.focus.x=this.colorObjs[this.selectedIndex].x}}])&&F(e.prototype,n),r&&F(e,r),t}();function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function U(t,e){return(U=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=W(t);if(e){var i=W(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G(this,n)}}function G(t,e){if(e&&("object"===Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $(t)}function $(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W(t){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Z=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&U(t,e)}(o,createjs.Container);var e,n,r,i=K(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this)).handle=t,n.cjs=n.handle.cjs,n.an=n.handle.an,n.exportRoot=e,n.anid=n.handle.anid||n.handle.id,n.onAddedToStageBind=n.onAddedToStage.bind($(n)),e&&(0==e.paused&&e.gotoAndStop(0),e&&null==e.stage?e.addEventListener("added",n.onAddedToStageBind):n.onAddedToStage(null)),n}return e=o,(n=[{key:"onAddedToStage",value:function(t){this.init()}},{key:"destroy",value:function(){var t=this.exportRoot;t&&t.hasEventListener("added")&&t.removeEventListener("added",this.onAddedToStageBind),this.removeAllEventListeners(),this.removeAllChildren()}},{key:"init",value:function(){}},{key:"initBtnMC",value:function(t,e,n,r,i){return t instanceof this.cjs.MovieClip&&(t.cursor="pointer",t.gotoAndStop(0),t.mouseChildren=!1,t.buttonHelper=t.buttonHelper||new this.cjs.ButtonHelper(t,e,n,r,i)),t}},{key:"notNull",value:function(t){return null!=t}},{key:"setColorFilter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0;this.notNull(t)&&t instanceof createjs.MovieClip&&(e?(t.filters=[new createjs.ColorFilter(n,r,i,o,a,l,s,u)],this.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height)):(t.filters=[],t.uncache()))}},{key:"setColorGrayFilter",value:function(t,e){this.notNull(t)&&t instanceof createjs.MovieClip&&(t.mouseEnabled=!e,t.mouseChildren=!e,e?(t.filters=[new createjs.ColorFilter(1,1,1,1,-100,-100,-100,0)],this.notNull(t.nominalBounds)&&t.cache(t.nominalBounds.x,t.nominalBounds.y,t.nominalBounds.width,t.nominalBounds.height)):(t.filters=[],t.uncache()))}},{key:"setDisableBtnMc",value:function(t,e,n){t instanceof this.cjs.MovieClip&&t.gotoAndStop(n),t.buttonHelper&&(t.buttonHelper._isPressed=e,t.buttonHelper.enabled=!e)}},{key:"setVisible",value:function(t){var e=this.exportRoot;e&&e!=this.handle.exportRoot&&e.visible!=t&&(e.visible=t)}},{key:"start",value:function(){}},{key:"stop",value:function(){}}])&&X(e.prototype,n),r&&X(e,r),o}();function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function J(t,e){return(J=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=et(t);if(e){var i=et(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(t,e){if(e&&("object"===q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function et(t){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&J(t,e)}(o,t);var e,n,r,i=Q(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"hide",value:function(){this.setVisible(!1)}},{key:"show",value:function(){this.setVisible(!0)}}])&&z(e.prototype,n),r&&z(e,r),o}(Z);function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lt(t,e){return(lt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ct(t);if(e){var i=ct(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(t,e){if(e&&("object"===rt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ht(t){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ft(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function yt(t,e){return(yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=bt(t);if(e){var i=bt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return mt(this,n)}}function mt(t,e){if(e&&("object"===ht(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function bt(t){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gt={BACKSPACE:"backspace",INPUT:"input",ADD:"add",PLUS:"plus"},wt="mousedown",Et=null;function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kt(t,e,n){return(kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jt(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ot(t,e){return(Ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jt(t);if(e){var i=jt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(t,e){if(e&&("object"===xt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function jt(t){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pt="input",At=null,_t=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ot(t,e)}(o,t);var e,n,r,i=Ct(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"hide",value:function(){this.exportRoot.stage.removeEventListener("stagemousedown",this.onMouseDownCheckHideBind),At=null,kt(jt(o.prototype),"hide",this).call(this)}},{key:"onMouseDownCheckHide",value:function(t){var e=this.exportRoot,n=e.globalToLocal(t.stageX,t.stageY);if(null==e||1!=e.hitTest(n.x,n.y)){var r=At;null!=r&&!(r instanceof createjs.MovieClip)&&(r=r.exportRoot),null!=r&&(n=r.globalToLocal(t.stageX,t.stageY),1==r.hitTest(n.x,n.y))||this._clickOK()}}},{key:"show",value:function(){kt(jt(o.prototype),"show",this).call(this),this.exportRoot.stage.addEventListener("stagemousedown",this.onMouseDownCheckHideBind)}},{key:"init",value:function(){this.isInited||(this.isInited=!0,this.dragInit(),this.inputInit(),this.onMouseDownCheckHideBind=this.onMouseDownCheckHide.bind(this))}},{key:"inputInit",value:function(){kt(jt(o.prototype),"inputInit",this).call(this),this.maxChars=0,this.maxValue=null,this.minValue=null,this.restricts=null}},{key:"reset",value:function(){kt(jt(o.prototype),"reset",this).call(this)}},{key:"setOK",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t?this._clickOK():this.clear()}},{key:"getValue",value:function(){return this.text}},{key:"setValue",value:function(t){t=(t=t||"").toString(),0<this.maxChars&&(t=t.substring(0,this.maxChars)),this.text=t,this.operations.length=0;for(var e=0;e<this.text.length;e++)this.operations.push({OPERATES:Pt,value:this.text.charAt(e)})}},{key:"getTarget",value:function(){return At}},{key:"setTarget",value:function(t){if(null!=(At=t)){this.maxChars=null,this.maxValue=null,this.minValue=null,this.restricts=null,void 0!==At.maxChars&&0<At.maxChars&&(this.maxChars=At.maxChars),void 0!==At.maxValue&&0<At.maxValue&&(this.maxValue=At.maxValue),void 0!==At.minValue&&0<=At.minValue&&(this.minValue=At.minValue),void 0!==At.restricts&&0<At.restricts.length&&(this.restricts=At.restricts);var e=null!=At.getValue?At.getValue():At.value;this.setValue(e)}}},{key:"checkValue",value:function(){var t=parseInt(this.text);return isNaN(t)?null:!(t>this.maxValue||t<this.minValue)}},{key:"_checkValue",value:function(t,e,n){var r=parseInt(t);return isNaN(r)||(null!=e&&r<e&&(r=e),null!=n&&r>n&&(r=n),String(r)!=t&&(t=String(r))),t}},{key:"_clickOK",value:function(){null!=At&&(null!=At.setValue&&At.setValue(this.text),At.hasOwnProperty("value")&&(At.value=parseInt(this.text))),kt(jt(o.prototype),"_clickOK",this).call(this)}},{key:"_update",value:function(){0<this.maxChars&&this.maxChars<this.operations.length&&(this.operations=this.operations.slice(0,this.maxChars));var t=this.operations,e=[];t.forEach((function(t){t.OPERATES==Pt&&e.push(t.value)}));var n=e.join("");this.text!=n&&(this.text=n,null!=At&&(null!=At.setValue&&At.setValue(this.text),At.hasOwnProperty("value")&&(At.value=parseInt(this.text))),this.onEventChange.forEach((function(t){null!=t&&t()})))}}])&&St(e.prototype,n),r&&St(e,r),o}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yt(t,e)}(o,t);var e,n,r,i=vt(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"clear",value:function(){this.operations.length=0,this.text=null}},{key:"init",value:function(){this.isInited||(this.isInited=!0,this.dragInit(),this.inputInit())}},{key:"inputInit",value:function(){this._operates=gt,this._clickEvent=wt,this.onEventChange=[],this.onEventOK=[],this.operations=[],this._initBtns(),this.orgX=this.exportRoot.x,this.orgY=this.exportRoot.y,Object.defineProperty(this,"target",{get:function(){return Et},set:function(t){null!=(Et=t)&&this.setValue(null!=Et.getValue?Et.getValue():null)}})}},{key:"hide",value:function(){this.target=null,this.operations.length=0,this.setVisible(!1)}},{key:"reset",value:function(){this.hide(),this.exportRoot.x=this.orgX,this.exportRoot.y=this.orgY}},{key:"setValue",value:function(t){this.text=t||"",this.operations.length=0;for(var e=0;e<this.text.length;e++)this.operations.push({OPERATES:gt.INPUT,value:this.text.charAt(e)})}},{key:"_initBtns",value:function(){var t,e=this,n=this.exportRoot;n.mouseChildren=!0;var r,i=ft(n.children);try{for(i.s();!(r=i.n()).done;)(t=r.value)instanceof createjs.MovieClip&&t.gotoAndStop(0),null!=t.name&&function(){var n=t.name.split("_");"btn"==n[0]&&(t.cursor="pointer",t.mouseChildren=!1,t.buttonHelper=new createjs.ButtonHelper(t,0,0,1,!1),"ok"==n[1]?t.addEventListener(wt,(function(t){e._clickOK()})):"backspace"==n[1]?t.addEventListener(wt,(function(t){e.operations.pop(),e._update()})):"clear"==n[1]?t.addEventListener(wt,(function(t){e.clear(),e._update()})):"0"!=n[1]&&"1"!=n[1]&&"2"!=n[1]&&"3"!=n[1]&&"4"!=n[1]&&"5"!=n[1]&&"6"!=n[1]&&"7"!=n[1]&&"8"!=n[1]&&"9"!=n[1]||(t.value=n[1],t.addEventListener(wt,(function(t){e.operations.push({OPERATES:gt.INPUT,value:n[1]}),e._update()}))))}()}catch(t){i.e(t)}finally{i.f()}}},{key:"_clickOK",value:function(){this.onEventOK.forEach((function(t){null!=t&&t()}))}},{key:"_update",value:function(){var t=this.operations,e=[];t.forEach((function(t){t.OPERATES==gt.INPUT&&e.push(t.value)}));var n=e.join("");this.text!=n&&(this.text=n,null!=Et&&null!=Et.setValue&&Et.setValue(this.text),this.onEventChange.forEach((function(t){null!=t&&t()})))}}])&&pt(e.prototype,n),r&&pt(e,r),o}(function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&lt(t,e)}(o,t);var e,n,r,i=st(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"init",value:function(){this.isInited||(this.isInited=!0,this.dragInit())}},{key:"dragInit",value:function(){this.dragAlpha=null,this.orgAlpha=1,this.dragEnable=!0,this.downPos={x:0,y:0},this.dragTarget=null,this.dragItem=null,this.hasDragHandle=!1,this.onDragStartBind=this.onDragStart.bind(this),this.onDragEndBind=this.onDragEnd.bind(this),this.onDragBind=this.onDrag.bind(this),this.onDragStartEvent=[],this.onDragEndEvent=[],this.onDragEvent=[]}},{key:"setDragTarget",value:function(t){this.dragTarget&&this.dragTarget.removeEventListener("mousedown",this.onDragStartBind),this.dragTarget=t,this.hasDragHandle=null!=this.dragTarget&&this.dragTarget!==this,null!=this.dragTarget&&this.dragTarget.addEventListener("mousedown",this.onDragStartBind)}},{key:"setItemDrag",value:function(t,e){if(null!=t){t.stage.addEventListener("pressup",this.onDragEndBind),t.stage.addEventListener("pressmove",this.onDragBind);var n=t.parent.globalToLocal(e.stageX,e.stageY);t.offsetX=t.x-n.x,t.offsetY=t.y-n.y}}},{key:"onDragStart",value:function(t){if(this.dragEnable){this.downPos.x=t.stageX.toFixed(0),this.downPos.y=t.stageY.toFixed(0);var e=this.hasDragHandle?this.dragTarget.parent:t.currentTarget;this.setItemDrag(e,t),this.dragItem=e,e.parent.setChildIndex(e,e.parent.children.length-1);var n,r=it(this.onDragStartEvent);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=i&&i(t)}}catch(t){r.e(t)}finally{r.f()}t.stopPropagation(),t.stopImmediatePropagation()}}},{key:"onDragEnd",value:function(t){if(this.dragEnable){var e=this.dragItem;e&&(e.stage.removeEventListener("pressup",this.onDragEndBind),e.stage.removeEventListener("pressmove",this.onDragBind)),null!=this.dragAlpha&&(e.alpha=this.orgAlpha||1);var n,r=it(this.onDragEndEvent);try{for(r.s();!(n=r.n()).done;){var i=n.value;null!=i&&i(t)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"onDrag",value:function(t){if(this.dragEnable){var e=t.stageX.toFixed(0)-this.downPos.x,n=t.stageY.toFixed(0)-this.downPos.y;if(!(Math.abs(e)<1&&Math.abs(n)<1)){var r=this.dragItem,i=r.parent.globalToLocal(t.stageX,t.stageY);r.x=i.x+r.offsetX,r.y=i.y+r.offsetY,null!=this.dragAlpha&&r.alpha!=this.dragAlpha&&(this.orgAlpha=r.alpha,r.alpha=this.dragAlpha);var o,a=it(this.onDragEvent);try{for(a.s();!(o=a.n()).done;){var l=o.value;null!=l&&l(t)}}catch(t){a.e(t)}finally{a.f()}t.stopPropagation(),t.stopImmediatePropagation()}}}}])&&at(e.prototype,n),r&&at(e,r),o}(nt)));function Bt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var It=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handle=e,this.exportRoot=n,n&&(n.gotoAndStop(0),this.init())}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this,e=this.exportRoot;this.stage=e.stage;var n,r=Bt(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.name&&function(){var e=i.name.split("_");"btn"==e[0]&&(i instanceof createjs.MovieClip&&(i.gotoAndStop(0),i.cursor="pointer",i.mouseChildren=!1),i.addEventListener("mousedown",(function(n){t.selectToolBtn(e[1])})))}()}}catch(t){r.e(t)}finally{r.f()}this.toolMask=e.getChildByName("tool_mask")||new createjs.MovieClip,null!=this.toolMask&&(this.toolMask.gotoAndStop(0),this.toolMask.mouseChildren=!1,this.toolMask.tickChildren=!1),null!=this.toolMask&&this.toolMask.addEventListener("mousedown",(function(t){})),this.stage.addEventListener("change_mask",(function(e){var n=e.data;null!=n&&!0===n.canShowFraction?t.showfractionMask.visible=!1:t.showfractionMask.visible=!0})),this.curSelected=null,this.selectToolBtn("mouse"),this.helpBtn=this.exportRoot.getChildByName("btn_help"),this.helpBtn&&this.helpBtn instanceof createjs.MovieClip&&(this.helpBtn.gotoAndStop(0),this.helpBtn.mouseChildren=!1,this.helpBtn.cursor="pointer"),this.helpBtn&&this.helpBtn.addEventListener("mousedown",(function(e){null!=t.intro&&(t.handle.drawBoard.cursor.setType(M.DEFAULT),t.handle.drawBoard.exportRoot.mouseChildren=!1,t.handle.drawBoard.mouseEnabled=!1,t.intro.visible=!0,t.intro.parent.setChildIndex(t.intro,t.intro.parent.numChildren-1))}));var o=this.exportRoot.getChildByName("intro");if(null!=o){o.gotoAndStop(0),o.visible=!1,o.getChildAt(0).addEventListener("mousedown",(function(t){}));var a=o.getChildByName("btn_close");null!=a&&a.addEventListener("mousedown",(function(e){o.visible=!1;var n=t.handle.drawBoard.cursor.states;n.shift();var r=n.shift();t.handle.drawBoard.cursor.setType(r),t.handle.drawBoard.exportRoot.mouseChildren=!0,r!=M.DEFAULT&&(t.handle.drawBoard.mouseEnabled=!0)}))}this.intro=o}},{key:"reset",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.handle.drawBoard;e&&(e.selectTool(k),e.clearAll()),t&&null!=this.handle.reset&&this.handle.reset(),this.selectToolBtn("mouse")}},{key:"selectToolBtn",value:function(t){var e=this.handle.drawBoard,n=this.exportRoot.getChildByName("btn_"+t);if(null==this.curSelected||this.curSelected!=n){var r=!1;switch(t){case"help":break;case"home":A.type=0,this.handle.setSceneById(0),this.selectToolBtn("reset");break;case"reset":this.reset();break;case"select":this.handle.setTypePanelShow(!0);break;case"mouse":this.toolMask&&1==this.toolMask.visible&&(this.toolMask.visible=!1),r=!0,e&&e.selectTool(k);break;case"pen":this.toolMask&&0==this.toolMask.visible&&(this.toolMask.visible=!0),r=!0,this.handle.setPenColorPanelShow(!0),e&&e.selectTool(O);break;case"eraser":this.toolMask&&0==this.toolMask.visible&&(this.toolMask.visible=!0),r=!0,e&&e.selectTool(C);break;case"eraserall":e&&e.clearAll()}1==r&&n&&(n instanceof createjs.MovieClip&&1<n.totalFrames&&n.gotoAndStop(1),this._unselect(),this.curSelected=n)}else"pen"==t&&this.handle.setPenColorPanelShow(!0)}},{key:"_unselect",value:function(){null!=this.curSelected&&1<this.curSelected.totalFrames&&(this.curSelected.gotoAndStop(0),this.curSelected=null)}}])&&Rt(e.prototype,n),r&&Rt(e,r),t}();function Lt(t){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ht(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Dt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e,n){return(Ft="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ut(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Yt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ut(t);if(e){var i=Ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Xt(this,n)}}function Xt(t,e){if(e&&("object"===Lt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Ut(t){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(o,t);var e,n,r,i=Yt(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"init",value:function(){var t=this,e=this.exportRoot,n=e.getChildAt(0);n&&n.addEventListener("mousedown",(function(t){return!1}))&&n.addEventListener("click",(function(t){return!1}));var r,i=Ht(e.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o&&o.name&&o instanceof createjs.MovieClip)if(o.gotoAndStop(0),"menu_sub"==o.name)o.addEventListener("click",(function(e){var n=e.target;if(n.name){var r=n.name.split("_");"btn"==r[0]&&(A.type=parseInt(r[1]),t.handle.selectMenuMain(null))}})),o.visible=!1,this.menusub=o;else{var a=o.name.split("_");"btn"==a[0]&&function(){var e=parseInt(a[1]);o.addEventListener("click",(function(){A.theme=e+1,null!=t.menusub?(t.menusub.gotoAndStop(e),t.menusub.visible=!0):t.handle.selectMenuMain(null)}))}()}}}catch(t){i.e(t)}finally{i.f()}}},{key:"setVisible",value:function(t){Ft(Ut(o.prototype),"setVisible",this).call(this,t),t&&this.menusub&&(this.menusub.visible=!1)}}])&&Nt(e.prototype,n),r&&Nt(e,r),o}(Z);function Gt(t){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Wt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Wt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qt(t,e){return(qt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function zt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=te(t);if(e){var i=te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(t,e){if(e&&("object"===Gt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qt(t)}function Qt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qt(t,e)}(o,t);var e,n,r,i=zt(o);function o(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,t,e)).selectedEvents=[],n.isCanMove=!1,n.isKeepSelected=!1,n._target=null,Object.defineProperty(Qt(n),"target",{get:function(){return this._target},set:function(t){this._target=t,1==this.isCanMove&&this._updatePosition()}}),n._value=null,Object.defineProperty(Qt(n),"value",{get:function(){return this._value},set:function(t){var e=this;this._value=t,!0===this.isKeepSelected&&null!=this.numBtns&&this.numBtns.forEach((function(n){var r=n.value==t,i=r?2:0;e.setDisableBtnMc(n,r,i)}))}}),n}return e=o,(n=[{key:"init",value:function(){var t=this,e=this.exportRoot;e.mouseChildren=!0,this.numBtns=[];var n,r=$t(e.children);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i&&i.name)if("btn_ok"==i.name)this.initBtnMC(i,0,0,1,!1),i.value=nameArr[1],i.addEventListener("click",(function(){t.clickBtnNum(evt.currentTarget.value)})),this.btnOK=i;else{var o=i.name.split("_");"btn"==o[0]&&(this.initBtnMC(i,0,0,1,!1),i.value=parseInt(o[1]),i.addEventListener("click",(function(e){t.clickBtnNum(e.currentTarget.value)})),this.numBtns.push(i))}}}catch(t){r.e(t)}finally{r.f()}this.exportRoot.getChildAt(0).addEventListener("mousedown",(function(t){})),this._checkHideBind=this._checkHide.bind(this)}},{key:"hide",value:function(){this.exportRoot.visible=!1,this.exportRoot.stage.removeEventListener("stagemousedown",this._checkHideBind,!0),this.stopEvent&&(this.stopEvent.removeEventListener("mousedown",this._checkHideBind),this.stopEvent.parent.removeChild(this.stopEvent),this.stopEvent=null)}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.btnTarget=t,this.exportRoot.visible=!0,this.exportRoot.parent.setChildIndex(this.exportRoot,this.exportRoot.parent.children.length-1),this.exportRoot.stage.addEventListener("stagemousedown",this._checkHideBind,!0)}},{key:"_checkHide",value:function(t){if(this.exportRoot.visible){var e=[this.btnTarget,this.exportRoot],n=!1;e.forEach((function(e){if(null!=e){var r=e.globalToLocal(t.stageX,t.stageY);!n&&1==e.hitTest(r.x,r.y)&&(n=!0)}})),n||(this.hide(),this.clickBtnNum(null))}}},{key:"_updatePosition",value:function(){if(null!=this.target){var t=this.target.exportRoot;t.getBounds(),this.exportRoot.x=t.x}}},{key:"clickBtnNum",value:function(t){"number"==typeof t&&(this.value=t);var e=this.selectedEvents||[];null!=e&&e.forEach((function(e){null!=e&&e(t)}))}}])&&Zt(e.prototype,n),r&&Zt(e,r),o}(nt);function ne(t){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=le(t);if(e){var i=le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ae(this,n)}}function ae(t,e){if(e&&("object"===ne(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(o,t);var e,n,r,i=oe(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"init",value:function(){this.exportRoot,this.reset()}},{key:"reset",value:function(){}},{key:"libCloneItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var n=this.an.getComposition(this.anid).getLibrary(),r=new n[t];if(r.gotoAndStop(0),null!=e)for(var i in e)r[i]=e[i];return r}catch(t){}return null}}])&&re(e.prototype,n),r&&re(e,r),o}(Z);function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.colorIndex=0,this.colors=e,1==Array.isArray(t))this.numMCArr=t.slice(0);else{this.exportRoot=t;var n=this.exportRoot;n.gotoAndStop(0),this.numMCArr=[];for(var r=null==n?0:n.children.length,i=-1;r>=0;){r--,i++;var o=n.getChildByName("n_"+i);if(o){if(this.numMCArr.push(o),o.gotoAndStop(0),o.orgX=o.x,o.isShow=!0,null!=e){for(var a=[o],l=0;l<e.length;l++){var s=n.getChildByName(e[l]+i);null!=s&&(s.gotoAndStop(0),s.visible=!1,a.push(s))}o.colorIndex=0,o.colors=a}}else r=-1}}return this._numMax=parseInt(new Array(this.numMCArr.length).fill(9).join("")),this._valueMax=this._numMax,Object.defineProperty(this,"valueMax",{get:function(){return this._valueMax},set:function(t){t=t<0?0:this._numMax<t?this._numMax:t,this._valueMax!=t&&(this._valueMax=t,this._updateValue())}}),this._value=0,Object.defineProperty(this,"value",{get:function(){return this._value},set:function(t){this._setValue(t)}}),this._isVisible=!0,Object.defineProperty(this,"isVisible",{get:function(){return this._isVisible},set:function(t){this._isVisible=t,this._updateVisible(t)}}),this._isAlignCenter=!0,Object.defineProperty(this,"isAlignCenter",{get:function(){return this._isAlignCenter},set:function(t){this._isAlignCenter=t,this._updatePosition()}}),this._isShowHeadZero=!1,Object.defineProperty(this,"isShowHeadZero",{get:function(){return this._isShowHeadZero},set:function(t){this._isShowHeadZero=t,this._updatePosition()}}),this}},{key:"setColor",value:function(t){var e=this;this.colorIndex=t,(this.numMCArr||[]).forEach((function(t){var n=t.isShow;(t.colors||[]).forEach((function(r,i){r.x!=t.x&&(r.x=t.x),r.currentFrame!=t.currentFrame&&r.gotoAndStop(t.currentFrame),r.visible=n&&i==e.colorIndex}))}))}},{key:"_setValue",value:function(t){null!=t&&isNaN(parseInt(t))&&(t=null),this._value=this._valueMax<t?this._valueMax:t,this._updateValue()}},{key:"_updatePosition",value:function(){if(!0===this.isAlignCenter)for(var t,e=this.numMCArr,n=e.length,r=null,i=0,o=this._isShowHeadZero,a=n-1;0<=a;a--)t=e[a],null==r&&(r=t.orgX),!o&&(0!==t.currentFrame||0==a&&null!=this.value)&&(o=!0,i=t.orgX-r),t.x=t.orgX-i/2,t.visible=o,t.isShow=o;null!=this.colorIndex&&this.setColor(this.colorIndex)}},{key:"_updateValue",value:function(){for(var t,e,n=parseInt(this.value),r=this.numMCArr,i=r.length,o=0;o<i;o++)t=r[o],e=0<=n?Math.floor(n)%10:0,t.gotoAndStop(e),1<=n&&(n/=10);this._updatePosition()}},{key:"_updateVisible",value:function(t){for(var e=this.numMCArr,n=e.length,r=0;r<n;r++)e[r].visible=t;null!=this.exportRoot&&(this.exportRoot.visible=t),1==t&&this._updatePosition()}}])&&ue(e.prototype,n),r&&ue(e,r),t}();function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,l=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){l=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(l)throw i}}return o}(t,e)||de(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){if(t){if("string"==typeof t)return pe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pe(t,e):void 0}}function pe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ve(t,e,n){return(ve="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=we(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function me(t,e){return(me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=we(t);if(e){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(t,e){if(e&&("object"===he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=[31,28,31,30,31,30,31,31,30,31,30,31],xe=null,Se=0,ke=0,Oe=!1,Ce=null,Te=null,je=null,Pe=null,Ae=null,_e=null,Be=null,Me=null,Re=null,Ie=null,Le=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(o,t);var e,n,r,i=be(o);function o(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,t,e)).themeType=n,r.onEventOK=[],r}return e=o,(n=[{key:"getData",value:function(){var t=null;if(3==this.themeType){(t=[]).push("".concat(je,"-").concat(Pe));for(var e=0;e<ke;e++){var n=He(t[0],e+1);t.push("".concat(n[0],"-").concat(n[1]))}}return{themeType:this.themeType,timeSetNum:Se,isTimeSys24:Oe,daySetNum:ke,dateArr:t,timeBeginMon:je,timeBeginDay:Pe,timeBeginHH:Ce,timeBeginMM:Te,timeEndMon:Be,timeEndDay:Me,timeEndHH:Ae,timeEndMM:_e,timeElapsedHH:Re,timeElapsedMM:Ie}}},{key:"reset",value:function(){this.settingClear(),this.setTimeByValue(0),this.setDayByValue(1)}},{key:"setVisible",value:function(t){ve(we(o.prototype),"setVisible",this).call(this,t),1==t&&this.init()}},{key:"init",value:function(){var t=this;if(!this.isInited){this.isInited=!0;var e=this.exportRoot,n=e.getChildAt(0);n&&n.addEventListener("mousedown",(function(t){return!1}))&&n.addEventListener("click",(function(t){return!1})),this.timeSetBtns=[],this.daySetBtns=[],this.dayTxts=[],this.inputs=[];var r,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=de(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}(e.children);try{var o=function(){var e=r.value;if(e&&e.name){e instanceof createjs.MovieClip&&e.gotoAndStop(0);var n=e.name.split("_");"btn"==n[0]?(e.removeAllEventListeners("click"),e.mouseChildren=!1,e.cursor="pointer","close"==n[1]?e.addEventListener("click",(function(){t.setVisible(!1)})):"day"==n[1]?(t.daySetBtns.push(e),e.value=parseInt(n[2]),e.selected=!1,e.addEventListener("click",(function(){t.setDayByValue(e.value)}))):"inputagain"==n[1]?(e.visible=!1,e.addEventListener("click",(function(){t.settingClear()}))):"ok"==n[1]?e.addEventListener("click",(function(){t.settingOK()})):"time"==n[1]&&(t.timeSetBtns.push(e),e.value=parseInt(n[2]),e.selected=!1,e.addEventListener("click",(function(){t.setTimeByValue(e.value)})))):"dtxt"==n[0]?t.dayTxts.push(e):"mask"==n[0]?t.inputMask=e:"num"==n[0]&&(e.visible=!1,e.removeAllEventListeners("click"),e.mouseChildren=!1,e.cursor="pointer",e.addEventListener("click",(function(e){t.inputSetFocus(e.currentTarget)})),e.tag=e.name,e.group=parseInt(n[1]),e.num=parseInt(n[2]),e.placeNumHandle=(new ce).init(e),e.placeNumHandle.maxChars=2,e.placeNumHandle.minValue=0,e.placeNumHandle.maxValue=99,t.inputs.push(e))}};for(i.s();!(r=i.n()).done;)o()}catch(t){i.e(t)}finally{i.f()}setTimeout((function(){t.setDayByValue(1)}),50)}(xe=this.handle.handle.calcInstance).onEventOK=[function(){t.inputSetFocus(xe.getTarget(),!1)}]}},{key:"inputClearAll",value:function(){(this.inputs||[]).forEach((function(t){t.placeNumHandle.value=null}))}},{key:"inputSetFocus",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!=n){var r=xe.getTarget();if(null!=r){if(r==t)return;xe.setOK()}null!=t&&(this.handle.inputFollowTarget(t),t.placeNumHandle.value=null,xe.setTarget(t.placeNumHandle),xe.show())}else{var i=this.themeType;if(3==i){var o=t.exportRoot;if((1==o.num||2==o.num)&&0==this.settingCheckDate())return this.exportRoot.mouseChildren=!1,void this.handle.tipShowError(null,(function(){e.settingClear(),e.exportRoot.mouseChildren=!0}))}xe.hide()}}},{key:"settingCheckDate",value:function(){var t,e,n,r;(this.inputs||[]).forEach((function(i,o){1==i.group?(1==i.num&&(t=i),2==i.num&&(e=i)):2==i.group&&(1==i.num&&(n=i),2==i.num&&(r=i))}));var i,o,a=1;if(1==Se?(i=n.placeNumHandle.value,o=r.placeNumHandle.value,a=-1):(i=t.placeNumHandle.value,o=e.placeNumHandle.value),null!=i&&(i<1||i>12))return!1;var l,s=null==i?0:Ee[i-1];if(28==s&&(s=(l=(new Date).getFullYear())%4==0&&l%100!=0||l%400==0?29:28),null!=o&&(o<1||0<s&&o>s))return!1;if(null!=i&&null!=o){var u=He([i,o],ke*a);1==Se?(t.placeNumHandle.value=u[0],e.placeNumHandle.value=u[1]):(n.placeNumHandle.value=u[0],r.placeNumHandle.value=u[1])}return!0}},{key:"settingCheck",value:function(t){var e,n,r,i=!0,o=this.themeType;if(1==o)i&&1!=Se&&(null==Ce||Ce<0||Ce>12)&&(i=!1),i&&1!=Se&&(null==Te||Te<0||Te>59)&&(i=!1),i&&2!=Se&&(null==Ae||Ae<0||Ae>12)&&(i=!1),i&&2!=Se&&(null==_e||_e<0||_e>59)&&(i=!1),i&&3!=Se&&(null==Re||Re<0||Re>12)&&(i=!1),i&&3!=Se&&(null==Ie||Ie<0||Ie>59)&&(i=!1),i&&12==Ce&&Te>0&&(i=!1),i&&12==Ae&&_e>0&&(i=!1),i&&12==Re&&Ie>0&&(i=!1),i&&(null!=Ce&&null!=Te&&(e=60*Ce+Te),null!=Ae&&null!=_e&&(n=60*Ae+_e),null!=Re&&null!=Ie&&(r=60*Re+Ie),1==Se&&n-r<0&&(i=!1),2==Se&&e+r>720&&(i=!1),3==Se&&n<e&&(i=!1));else if(2==o){var a,l,s;i&&1!=Se&&(null==Ce||Ce<0||Ce>23)&&(i=!1),i&&1!=Se&&(null==Te||Te<0||Te>59)&&(i=!1),i&&2!=Se&&(null==Ae||Ae<0||Ae>23)&&(i=!1),i&&2!=Se&&(null==_e||_e<0||_e>59)&&(i=!1),i&&3!=Se&&(null==Re||Re<0||Re>23)&&(i=!1),i&&3!=Se&&(null==Ie||Ie<0||Ie>59)&&(i=!1),i&&(null!=Ce&&null!=Te&&(a=60*Ce+Te),null!=Ae&&null!=_e&&(l=60*Ae+_e),null!=Re&&null!=Ie&&(s=60*Re+Ie),1==Se&&l-s<0&&(i=!1),2==Se&&a+s>1440&&(i=!1),3==Se&&l<a&&(i=!1))}else if(3==o){var u=24*(1+ke);if(i&&(null==je||null==Pe||null==Be||null==Me)&&(i=!1),i&&1!=Se&&(null==Ce||Ce<0||Ce>24)&&(i=!1),i&&2!=Se&&(null==Ae||Ae<0||Ae>24)&&(i=!1),i&&3!=Se&&(null==Re||Re>u)&&(i=!1),i){var c,h,f,d=24*ke;null!=Ce&&(c=Ce),null!=Ae&&(h=Ae+d),null!=Re&&(f=Re),1==Se&&(h-f<0||h-f>24)&&(i=!1),2==Se&&(c+f>u||c+f<d)&&(i=!1),3==Se&&h<=c&&(i=!1)}}return i}},{key:"settingClear",value:function(){this.inputClearAll(),xe.clear()}},{key:"settingOK",value:function(){var t=this,e=this.themeType,n=this.inputs||[];if(1==e||2==e?n.forEach((function(t){1==t.group?(1==t.num&&(Ce=1!=t.visible?null:t.placeNumHandle.value),2==t.num&&(Te=1!=t.visible?null:t.placeNumHandle.value)):2==t.group?(1==t.num&&(Ae=1!=t.visible?null:t.placeNumHandle.value),2==t.num&&(_e=1!=t.visible?null:t.placeNumHandle.value)):3==t.group&&(1==t.num&&(Re=1!=t.visible?null:t.placeNumHandle.value),2==t.num&&(Ie=1!=t.visible?null:t.placeNumHandle.value))})):3==e&&n.forEach((function(t){1==t.group?(1==t.num&&(je=1!=t.visible?null:t.placeNumHandle.value),2==t.num&&(Pe=1!=t.visible?null:t.placeNumHandle.value),3==t.num&&(Ce=1!=t.visible?null:t.placeNumHandle.value)):2==t.group?(1==t.num&&(Be=1!=t.visible?null:t.placeNumHandle.value),2==t.num&&(Me=1!=t.visible?null:t.placeNumHandle.value),3==t.num&&(Ae=1!=t.visible?null:t.placeNumHandle.value)):3==t.group&&3==t.num&&(Re=1!=t.visible?null:t.placeNumHandle.value)})),0==this.settingCheck())return this.exportRoot.mouseChildren=!1,void this.handle.tipShowError(null,(function(){t.settingClear(),t.exportRoot.mouseChildren=!0}));Oe=1!=e,this.setVisible(!1),(this.onEventOK||[]).forEach((function(t){null!=t&&t()}))}},{key:"setDayByValue",value:function(t){ke=t,(this.daySetBtns||[]).forEach((function(e){e.value!=t&&e.gotoAndStop(0),e.value==t&&e.gotoAndStop(1)}));var e=this.themeType;1==e||2==e?this.dayTxts.forEach((function(e){var n=t-1;n!=e.currentFrame&&e.gotoAndStop(n)})):3==e&&(this.dayTxts.forEach((function(e,n){var r=0==n?0:t;r!=e.currentFrame&&e.gotoAndStop(r)})),this.settingCheckDate())}},{key:"setTimeByValue",value:function(t){if(Se=t,(this.timeSetBtns||[]).forEach((function(e){e.value!=t&&e.gotoAndStop(0),e.value==t&&e.gotoAndStop(1)})),this.inputClearAll(),this.inputMask.visible=0==t,!(t<=0)){var e=this.inputs||[];3==this.themeType?e.forEach((function(e){3==e.num?(e.group==t&&(e.visible=!1),e.group!=t&&(e.visible=!0)):(e.visible=!0,1==e.group&&1==Se||2==e.group&&1<Se?(e.gotoAndStop(1),e.mouseEnabled=!1):0!=e.currentFrame&&(e.gotoAndStop(0),e.mouseEnabled=!0))})):e.forEach((function(e){e.group==t&&(e.visible=!1),e.group!=t&&(e.visible=!0)})),0<parseInt(A.htmlParams.test)&&this.testSettingDefault()}}},{key:"testSettingDefault",value:function(){var t=this.themeType,e=this.inputs||[];if(1==t){var n=[[null,null,7,10,2,5],[7,10,null,null,2,5],[6,10,10,5,null,null]];e.forEach((function(t){var e=2*(t.group-1)+t.num-1,r=n[Se-1][e];null!=r&&(t.placeNumHandle.value=r)}))}else if(2==t){var r=[[null,null,19,10,2,5],[11,10,null,null,2,5],[7,10,20,5,null,null]];e.forEach((function(t){var e=2*(t.group-1)+t.num-1,n=r[Se-1][e];null!=n&&(t.placeNumHandle.value=n)}))}else if(3==t){var i=[[3,5,null,3,6,20,null,null,22],[3,5,16,3,6,null,null,null,22],[3,5,16,3,6,20,null,null,null]];e.forEach((function(t){var e=3*(t.group-1)+t.num-1,n=i[Se-1][e];null!=n&&(t.placeNumHandle.value=n)}))}}}])&&ye(e.prototype,n),r&&ye(e,r),o}(Z);function He(t,e){var n=fe((Array.isArray(t)?t:t.split("-")).map(Number),2),r=n[0],i=n[1],o=(new Date).getFullYear(),a=new Date(o,r-1,i);return a.setDate(a.getDate()+e),[a.getMonth()+1,a.getDate()]}function De(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Fe=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;De(this,t),this.init(e,n,r)}var e,n,r;return e=t,(n=[{key:"destroy",value:function(){this.dragHandle&&this.dragHandle.removeAllEventListeners("mousedown"),this.handle=null,this.dragTarget=null,this.dragHandle=null,this.isDown=!1,this.isMove=!1,this.onStartEvent.length=0,this.onDragEvent.length=0,this.onEndEvent.length=0}},{key:"init",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return!0!==this.isInited&&(this.isInited=!0,this.handle=t,this.dragTarget=e,this.dragHandle=n||e,this.onStartEvent=[],this.onDragEvent=[],this.onEndEvent=[],this.onStartBind=this.onStart.bind(this),this.onDragBind=this.onDrag.bind(this),this.onEndBind=this.onEnd.bind(this),this.dragHandle&&this.dragHandle.addEventListener("mousedown",this.onStartBind),this.endPosX=0,this.endPosY=0,this.startPosX=0,this.startPosY=0,this.offsetX=0,this.offsetY=0,this.isDown=!1,this.isMove=!1,this.dragRect=null),this}},{key:"onStart",value:function(t){this.startPosX=t.stageX,this.startPosY=t.stageY,this.isDown=!0,this.isMove=!1;var e=this.dragTarget.localToGlobal(0,0);this.offsetX=e.x-t.stageX,this.offsetY=e.y-t.stageY;var n=this.dragHandle;n&&n.stage&&(n.stage.addEventListener("pressmove",this.onDragBind),n.stage.addEventListener("pressup",this.onEndBind)),this.onStartEvent.forEach((function(e){null!=e&&e(t)}))}},{key:"onDrag",value:function(t){if(!0===this.isDown){if(Math.abs(t.stageX-this.startPosX)<2&&Math.abs(t.stageY-this.startPosY)<2)return;this.isMove=!0,this.endPosX=t.stageX,this.endPosY=t.stageY;var e=this.dragRect,n=this.endPosX+this.offsetX,r=this.endPosY+this.offsetY;null!=e&&(n<e.x&&(n=e.x),r<e.y&&(r=e.y),n>e.x+e.width&&(n=e.x+e.width),r>e.y+e.height&&(r=e.y+e.height));var i=this.dragTarget.parent.globalToLocal(n,r);this.dragTarget.x=i.x,this.dragTarget.y=i.y,this.onDragEvent.forEach((function(e){null!=e&&e(t)}))}}},{key:"onEnd",value:function(t){this.onEndEvent.forEach((function(e){null!=e&&e(t)}));var e=this.dragHandle;e&&e.stage&&(e.stage.removeEventListener("pressmove",this.onDragBind),e.stage.removeEventListener("pressup",this.onEndBind)),this.isDown=!1,this.isMove=!1}}])&&Ne(e.prototype,n),r&&Ne(e,r),t}();function Ve(t){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ye(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function Xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=$e(t);if(e){var i=$e(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(t,e){if(e&&("object"===Ve(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function $e(t){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function We(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t}var ze=function(){function t(e,n){We(this,t),this.handle=e,this.exportRoot=n,this.staticEndLineAll=[],this.staticEndLines=[],this.staticTextAll=[],this.dyTextAll=[],this.dragEndLines=[],this.dragColors=[]}return qe(t,[{key:"hide",value:function(){null!=this.mainLine&&(this.mainLine.visible=!1),null!=this.mmddContainer&&this.mmddContainer.children.forEach((function(t){null!=t&&(t.visible=!1)})),this.dyTextAll&&this.dyTextAll.forEach((function(t){null!=t&&(t.visible=!1)})),this.dyTextGuideAll&&this.dyTextGuideAll.forEach((function(t){null!=t&&(t.visible=!1)})),this.staticTextAll&&this.staticTextAll.forEach((function(t){null!=t&&(t.visible=!1)})),this.staticEndLineAll&&this.staticEndLineAll.forEach((function(t){null!=t&&(t.visible=!1)})),this.dragEndLines&&this.dragEndLines.forEach((function(t){null!=t&&(t.visible=!1)})),this.dragColors&&this.dragColors.forEach((function(t,e){null!=t&&(t.visible=!1)}))}},{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null!=e){this.isInited||(this.isInited=!0,this.initObjs()),this.hide();var n=e;n.staticTextOffsetY=e.staticTextOffsetY||-78,n.dyTextOffsetY1=e.dyTextOffsetY1||-80,n.dyTextOffsetY2=e.dyTextOffsetY2||100,n.themeType=e.themeType||1,n.daySetNum=e.daySetNum||1,n.isTimeSys24=!!e.isTimeSys24,n.lineStartX=e.lineStartX||110,n.lineStartY=e.lineStartY||400,n.lineLength=e.lineLength||(3==n.themeType?(n.daySetNum,1008):720*1.4),this.oParamas=this.dataCalcInit(n),this.dragColors.forEach((function(t,e){t.y=n.lineStartY,t.x=n.lineStartX,t.scaleX=0})),this.mainLine.x=n.lineStartX,this.mainLine.y=n.lineStartY;var r=this.staticEndLineAll.slice(0,3==n.themeType?2==n.daySetNum?4:3:2),i=n.lineLength/(r.length-1);r.forEach((function(e,r){e.y=n.lineStartY,e.x=n.lineStartX+r*i,!e.visible&&(e.visible=!0),e.labelTextObj=t.staticTextAll[r],null!=e.labelTextObj&&(e.labelTextObj.x=e.x,e.labelTextObj.y=e.y+n.staticTextOffsetY,e.labelTextObj.visible=!0,e.labelTextObj.update=function(){e.labelTextObj.bounds=e.labelTextObj.getBounds()||e.labelTextObj.nominalBounds,e.labelTextObj.width=e.labelTextObj.bounds.width,e.labelTextObj.height=e.labelTextObj.bounds.height})})),this.staticEndLines=r,this.dragEndLines.forEach((function(e,r){e.y=n.lineStartY,e.x=n.lineStartX;var i=new Fe(t,e);i.onStartEvent.push((function(e){t.dragStart(e)})),i.onDragEvent.push((function(e){t.dragMove(e)})),i.onEndEvent.push((function(e){t.dragEnd()})),e.dragDropHandle=i,e.cursor="pointer"})),this.dragEndLines.forEach((function(t){null!=t&&!t.visible&&(t.visible=!0)})),this.dragColors.forEach((function(t,e){!t.visible&&(t.visible=!0)})),null!=this.mainLine&&(this.mainLine.visible=!0),this.staticTextUpdate(),this.isShowAnswer=null,setTimeout((function(){t.update(!0)}),50)}}},{key:"initObjs",value:function(){var t=this.exportRoot;this.dragColors=[];for(var e=0;e<3;e++)this.dragColors.push(t.addChild(A.libCloneItem(e<2?"mcColorGrey":"mcColorGreen")));this.mmddContainer=t.addChild(new createjs.Container),this.mainLine=t.addChild(A.libCloneItem("mcAxisLine")),this.dyTextGuideAll=[];for(var n=0;n<2;n++)this.dyTextGuideAll.push(t.addChild(A.libCloneItem("mcTextGuide")));this.staticEndLineAll=[];for(var r=0;r<4;r++)this.staticEndLineAll.push(t.addChild(A.libCloneItem("mcEndLine")));this.dragEndLines=[];for(var i=0;i<2;i++)this.dragEndLines.push(t.addChild(A.libCloneItem("mcEndLine")));this.staticTextAll=[];for(var o=0;o<4;o++)this.staticTextAll.push(t.addChild(A.libCloneItem("mcTextStatic")));this.dyTextAll=[];for(var a=0;a<3;a++)this.dyTextAll.push(t.addChild(new Je(A.libCloneItem(2==a?"mcTextDynamics1":"mcTextDynamics"))))}},{key:"answerSetShow",value:function(t){if(null==t&&(t=!1),this.isShowAnswer!==t){this.isShowAnswer=t;var e=this.oParamas;this.dyTextAll.forEach((function(n,r){n.setState(e.timeSetNum==r+1?t?2:1:2)}))}}},{key:"colorRectUpdate",value:function(){var t=this.dragEndLines.slice(0);t.sort((function(t,e){return t.x<e.x?-1:1}));var e=this.dragColors;e[1].scaleX=(t[1].x-e[1].x)/100,e[2].x=t[0].x,e[2].scaleX=(t[1].x-t[0].x)/100}},{key:"dataCalcInit",value:function(t){return t}},{key:"dataCalcMove",value:function(){var t=this.oParamas,e=this.dragEndLines.slice(0);e.sort((function(t,e){return t.x<e.x?-1:1}));var n=e[0].x,r=e[1].x,i=t.lineStartX;t.tBegin=Math.round((n-i)/t.tStepLen),t.tEnd=Math.round((r-i)/t.tStepLen),t.tElapsed=t.tEnd-t.tBegin,1==t.isTimeSys24&&(t.tBegin+=t.timeMin,t.tEnd+=t.timeMin),t.tBegin=.01*Math.round(100*t.tBegin),t.tEnd=.01*Math.round(100*t.tEnd),t.tElapsed=.01*Math.round(100*t.tElapsed),t.values=[parseInt(t.tBegin/60),t.tBegin%60,parseInt(t.tEnd/60),t.tEnd%60,parseInt(t.tElapsed/60),t.tElapsed%60]}},{key:"dataConfirmPos",value:function(t){var e=this.oParamas,n=e.lineStartX,r=e.tStepLen;return n+Math.floor((t-n)/r)*r}},{key:"dragEnd",value:function(){this.dragTarget=null}},{key:"dragMove",value:function(t){var e=this.dragTarget,n=(this.dragStartPos,this.oParamas),r=n.lineStartX,i=r+n.lineLength,o=e.x,a=n.lineStartY;o<r&&(o=r),o>i&&(o=i),o=this.dataConfirmPos(o),e.x=o,e.y=a,this.update()}},{key:"dragStart",value:function(t){var e=t.currentTarget;this.dragTarget=e,this.dragStartPos={x:e.x,y:e.y}}},{key:"dyTextUpdate",value:function(){var t=this,e=this.oParamas,n=this.dyTextAll;n.forEach((function(n,r){null==n.name&&(n.name="dyText_"+r),n.setStatus(r,e.themeType,e.isTimeSys24,e.daySetNum),null==t.isShowAnswer&&n.setState(1),n.setValue(e.values.slice(2*r,2*r+2),!(r<2)||e.isTimeSys24)})),this.answerSetShow(this.isShowAnswer);e.lineStartX,e.lineLength;var r=[];this.dragEndLines.forEach((function(t,e){r.push({x:t.x,y:t.y,dx:NaN,dy:0,offsetY:0,width:n[e].width,height:n[e].height,visible:!0})})),r.sort((function(t,e){return t.x<e.x?-1:1})),r.push({x:(r[1].x+r[0].x)/2,y:r[0].y,dx:NaN,dy:0,offsetY:0,width:n[2].width,height:n[2].height,visible:!0}),r[0].offsetY=e.dyTextOffsetY1,r[1].offsetY=e.dyTextOffsetY1,r[2].offsetY=e.dyTextOffsetY2,r=this.dyTextCheckCloseX(r),n.forEach((function(t,e){t.x=r[e].x,t.y=r[e].y+r[e].offsetY+r[e].dy,t.visible!=r[e].visible&&(t.visible=r[e].visible)})),this.dyTextGuideAll.forEach((function(t,i){if(t.visible=0!=r[i].dy&&0!=r[i].dx,t.x=n[i].x,t.y=e.lineStartY,t.visible){var o=t.getChildAt(0),a=t.getChildAt(1);a.y=n[i].y-e.lineStartY+25,o.y=a.y+30,o.scaleY=Math.abs(o.y)/100/2}}))}},{key:"dyTextCheckCloseX",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,i=this.staticEndLines;return i&&i.forEach((function(r,i){null!=r.labelTextObj.update&&r.labelTextObj.update();for(var o=0;o<t.length-1;o++)if(e=Math.abs(t[o].x-r.x),n=Math.ceil(.5*(t[o].width+r.labelTextObj.width)),e<n){var a=-1<[1,2,3,7].indexOf(r.labelTextObj.currentFrame+1)?80:50;t[o].dy=-a}})),e=Math.abs(t[0].x-t[1].x),n=Math.ceil(.5*(t[0].width+t[1].width)),e<n&&(t[0].dx=t[1].dx=e,t[1].dy=t[0].dy-(r+t[0].height)),t}},{key:"staticTextUpdate",value:function(){var t,e=this.oParamas,n=e.themeType,r=e.daySetNum,i=e.isTimeSys24;1==n?i?(1==r&&(t=[4,5]),2==r&&(t=[5,7])):(1==r&&(t=[1,2]),2==r&&(t=[2,3])):2==n?t=[4,6]:3==n&&(1==r&&(t=[8,8,8]),2==r&&(t=[8,8,8,8]));var o=this.staticEndLines;o&&o.forEach((function(n,r){var i=n.labelTextObj;null!=i&&(i.gotoAndStop(t[r]-1),i.y=n.y+e.staticTextOffsetY)}))}},{key:"timeSysUpdate",value:function(t){this.oParamas.isTimeSys24=t,this.staticTextUpdate(),this.dataCalcMove(),this.dyTextUpdate()}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(1==t){var e=this.oParamas,n=e.lineStartX+e.timeBegin*e.tStepLen,r=e.lineStartX+e.tEnd*e.tStepLen,i=this.dragEndLines;i[0].x=n,i[1].x=r}this.colorRectUpdate(),this.dataCalcMove(),this.dyTextUpdate()}}]),t}(),Je=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(n,createjs.Container);var e=Ke(n);function n(t){var r;return We(this,n),(r=e.call(this)).exportRoot=t,r.addChild(t),r.init(),r}return qe(n,[{key:"setState",value:function(t){this.clipObjs.forEach((function(e){null!=e&&null!=e.setState&&e.setState(t)}))}},{key:"setStatus",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!this.visible&&(this.visible=!0);var i=this.clipObjs,o=i[0],a=i[1],l=i[2];e!=this.type&&(this.type=e,this.isTimeSys24=null,this.daySetNum=null,i.forEach((function(t){null!=t&&(t.visible=!1)})),1==e||2==e?a.visible=!0:3==e&&(l.visible=!0)),r!=this.daySetNum&&(this.daySetNum=r,1==e&&null!=o&&o.gotoAndStop(r-1)),n!=this.isTimeSys24&&(this.isTimeSys24=n,1!=e&&3!=e||null!=o&&(o.visible=!n)),this.update()}},{key:"setValue",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t.slice(0);0==n&&(r=r.map((function(t,e){return 0==e&&null!=t&&12<t?t%12==0?12:t%12:t})));var i=this.clipObjs;i.forEach((function(n,i){null!=n&&(0==i&&3==e.type&&n.visible&&n.gotoAndStop(t[0]<=12?0:1),null!=n.setValue&&n.setValue(r))})),this.update()}},{key:"update",value:function(){this.width=Math.ceil(this.getBounds().width),this.height=Math.ceil(this.getBounds().height)}},{key:"initObj",value:function(t){var e,n=[],r=[],i=Ye(t.children);try{for(i.s();!(e=i.n()).done;){var o=e.value;if(null!=o.name){o.visible=!1,o.gotoAndStop(0);var a=o.name.split("_");"wenhao"==a[0]?n.push(o):"num"==a[0]&&("hh"==a[1]&&(r[0]=o),"mm"==a[1]&&(r[1]=o),o.placeNumHandle=(new ce).init(o))}}}catch(t){i.e(t)}finally{i.f()}t.objs1=n,t.objs2=r,t.setState=function(t){n.forEach((function(e,n){e.visible=1==t})),r.forEach((function(e,n){e.visible=2==t}))},t.setValue=function(t){r.forEach((function(e,n){e.placeNumHandle.value=t[n]}))}}},{key:"init",value:function(){this.clipObjs=[];var t=this.exportRoot;t.gotoAndStop(0);var e,n=Ye(t.children);try{for(n.s();!(e=n.n()).done;){var r=e.value;null!=r.name&&(r.gotoAndStop(0),"day"==r.name?(this.clipDay=r,this.clipObjs[0]=r):"hhmm"==r.name||"hm"==r.name?(this.initObj(r),this.clipObjs[1]=r,this.clipHHMM=r):"hh"!=r.name&&"h"!=r.name||(this.initObj(r),this.clipObjs[2]=r,this.clipHH=r))}}catch(t){n.e(t)}finally{n.f()}this.type=null,this.isTimeSys24=null,this.daySetNum=null}}]),n}();function Qe(t){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function en(t,e,n){return(en="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=an(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nn(t,e){return(nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=an(t);if(e){var i=an(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return on(this,n)}}function on(t,e){if(e&&("object"===Qe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function an(t){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ln=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nn(t,e)}(o,t);var e,n,r,i=rn(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};en(an(o.prototype),"init",this).call(this,t)}},{key:"dataCalcInit",value:function(t){var e=720;t.tElapsedMax=e,t.tStepLen=t.lineLength/e,t.timeMin=0,t.timeMax=e,2==t.daySetNum&&(t.timeMin+=e,t.timeMax+=e);var n=t.timeSetNum;return 1==n?(t.timeEnd=60*t.timeEndHH+t.timeEndMM,t.timeElapsed=60*t.timeElapsedHH+t.timeElapsedMM,t.timeBegin=t.timeEnd-t.timeElapsed):2==n?(t.timeBegin=60*t.timeBeginHH+t.timeBeginMM,t.timeElapsed=60*t.timeElapsedHH+t.timeElapsedMM,t.timeEnd=t.timeBegin+t.timeElapsed):3==n&&(t.timeBegin=60*t.timeBeginHH+t.timeBeginMM,t.timeEnd=60*t.timeEndHH+t.timeEndMM,t.timeElapsed=t.timeEnd-t.timeBegin),t.tBegin=t.timeBegin,t.tEnd=t.timeEnd,t.tElapsed=t.timeElapsed,t.values=[t.timeBeginHH,t.timeBeginMM,t.timeEndHH,t.timeEndMM,t.timeElapsedHH,t.timeElapsedMM],t}}])&&tn(e.prototype,n),r&&tn(e,r),o}(ze);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cn(t,e){return(cn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=dn(t);if(e){var i=dn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fn(this,n)}}function fn(t,e){if(e&&("object"===sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cn(t,e)}(o,t);var e,n,r,i=hn(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"dataCalcInit",value:function(t){var e=1440;t.tElapsedMax=e,t.tStepLen=t.lineLength/e,t.timeMin=0,t.timeMax=e;var n=t.timeSetNum;return 1==n?(t.timeEnd=t.timeMin+60*t.timeEndHH+t.timeEndMM,t.timeElapsed=60*t.timeElapsedHH+t.timeElapsedMM,t.timeBegin=t.timeEnd-t.timeElapsed):2==n?(t.timeBegin=t.timeMin+60*t.timeBeginHH+t.timeBeginMM,t.timeElapsed=60*t.timeElapsedHH+t.timeElapsedMM,t.timeEnd=t.timeBegin+t.timeElapsed):3==n&&(t.timeBegin=t.timeMin+60*t.timeBeginHH+t.timeBeginMM,t.timeEnd=t.timeMin+60*t.timeEndHH+t.timeEndMM,t.timeElapsed=t.timeEnd-t.timeBegin),t.tBegin=t.timeBegin,t.tEnd=t.timeEnd,t.tElapsed=t.timeElapsed,t.values=[t.timeBeginHH,t.timeBeginMM,t.timeEndHH,t.timeEndMM,t.timeElapsedHH,t.timeElapsedMM],t}},{key:"dataCalc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==t&&(t=this.oParamas)}}])&&un(e.prototype,n),r&&un(e,r),o}(ze);function yn(t){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bn(t,e,n){return e&&mn(t.prototype,e),n&&mn(t,n),t}function gn(t,e,n){return(gn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&En(t,e)}function En(t,e){return(En=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kn(t);if(e){var i=kn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Sn(this,n)}}function Sn(t,e){if(e&&("object"===yn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function kn(t){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var On=function(t){wn(n,t);var e=xn(n);function n(t,r){return vn(this,n),e.call(this,t,r)}return bn(n,[{key:"dataCalcInit",value:function(t){var e=24*(1+t.daySetNum),n=24*t.daySetNum;t.tElapsedMax=e,t.tStepLen=t.lineLength/e,t.timeMin=0,t.timeMax=e;var r=t.timeSetNum;return 1==r?(t.timeEnd=t.timeMin+t.timeEndHH+n,t.timeElapsed=t.timeElapsedHH,t.timeBegin=t.timeEnd-t.timeElapsed):2==r?(t.timeBegin=t.timeMin+t.timeBeginHH,t.timeElapsed=t.timeElapsedHH,t.timeEnd=t.timeBegin+t.timeElapsed):3==r&&(t.timeBegin=t.timeMin+t.timeBeginHH,t.timeEnd=t.timeMin+t.timeEndHH+n,t.timeElapsed=t.timeEnd-t.timeBegin),t.tBegin=t.timeBegin,t.tEnd=t.timeEnd,t.tElapsed=t.timeElapsed,t.values=[t.timeBeginHH,t.timeBeginMM,t.timeEndHH,t.timeEndMM,t.timeElapsedHH,t.timeElapsedMM],t}},{key:"dataCalcMove",value:function(){var t=this.oParamas,e=this.dragEndLines.slice(0);e.sort((function(t,e){return t.x<e.x?-1:1}));var n=this.staticEndLines,r=e[0].x,i=e[1].x,o=24*t.daySetNum;t.tBegin=Math.round((r-n[0].x)/t.tStepLen),t.tEnd=Math.round((i-n[n.length-2].x)/t.tStepLen),t.tElapsed=t.tEnd+o-t.tBegin,t.tBegin=.01*Math.round(100*t.tBegin),t.tEnd=.01*Math.round(100*t.tEnd),t.tElapsed=.01*Math.round(100*t.tElapsed),t.values=[t.tBegin,null,t.tEnd,null,t.tElapsed,null]}},{key:"dataConfirmPos",value:function(t){var e=t,n=this.dragTarget,r=this.oParamas,i=0,o=0,a=(r.daySetNum,r.tStepLen),l=this.dragEndLines,s=this.staticEndLines;return n==l[0]?(i=s[0].x,o=s[1].x):n==l[1]&&(i=s[s.length-2].x,o=s[s.length-1].x),e<i&&(e=i),e>o&&(e=o),i+Math.floor((e-i)/a)*a}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.lineStartY=450,gn(kn(n.prototype),"init",this).call(this,t);var e=this.mmddContainer,r=this.oParamas,i=this.staticEndLines,o=r.lineLength/(i.length-1);i.forEach((function(t,n){t.getChildAt(0);var a=t.x-3,l=t.y-320,s=o+6,u=n==i.length-1,c=u?null:r.dateArr[n],h=u?"m_arrow":"m_"+n,f=e.getChildByName(h);null==f&&((f=e.addChild(new Cn)).name=h),f.setData({id:n+1,isArrow:u,lineWidth:6,startY:r.lineStartY,x:a,y:l,width:s,date:c})})),e.visible=!0}}]),n}(ze),Cn=function(t){wn(n,createjs.Container);var e=xn(n);function n(){return vn(this,n),e.call(this)}return bn(n,[{key:"setData",value:function(t){var e=t;this.oParamas=e;var n=e.id,r=e.isArrow,i=e.lineWidth,o=e.date,a=this.clipLine,l=this.clipBG,s=this.clipDate;null==a&&((a=this.addChild(new A.libCloneItem("mcMMDDBG"))).rotation=90,a.scaleY=i/60,a.scaleX=3.8,this.clipLine=a),null==l&&(l=1==r?this.addChild(new A.libCloneItem("mcMMDDBGArrow")):this.addChild(new A.libCloneItem("mcMMDDBG")),this.clipBG=l),""<o&&null==s&&((s=this.addChild(new A.libCloneItem("mcMMDD_"+(n%2?1:2)))).month=(new ce).init(s.getChildByName("num_mon")),s.day=(new ce).init(s.getChildByName("num_day")),this.clipDate=s);var u=(n-1)%2;if(a.x=e.x+.5*i,a.y=e.y-30,a.gotoAndStop(u),l.x=e.x,l.y=e.y,l.gotoAndStop(u),1==r?this.parent.setChildIndex(this,this.parent.children.length-1):l.scaleX=e.width/100,null!=s){s.y=e.y,s.x=e.x+.5*e.width;var c=o.split("-").map(Number);s.month.value=c[0],s.day.value=c[1]}this.visible=!0}}]),n}();function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pn(t,e,n){return(Pn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mn(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function An(t,e){return(An=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Mn(t);if(e){var i=Mn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Bn(this,n)}}function Bn(t,e){if(e&&("object"===Tn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rn=1280,In=1008,Ln=null,Hn=null,Dn=null,Nn=null,Fn=null,Vn=null,Yn=null,Xn=null,Un=1,Kn=!0,Gn=!1,$n=!1,Wn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&An(t,e)}(o,t);var e,n,r,i=_n(o);function o(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),i.call(this,t,e)}return e=o,(n=[{key:"reset",value:function(){this.setVisible(!0)}},{key:"setVisible",value:function(t){Pn(Mn(o.prototype),"setVisible",this).call(this,t),t?(this.init(),this.settingInit()):(null!=this.timeNumberLine&&this.timeNumberLine.hide(),null!=(Yn=this.settingPanel)&&(Yn.setVisible(t),Yn.reset()))}},{key:"init",value:function(){var t=this;Un=A.theme;var e=this.handle.cloneContainer;if(this.objContainer=e,null==this.timeNumberLine)switch(Un){case 1:this.timeNumberLine=new ln(this,e.addChild(new createjs.Container));break;case 2:this.timeNumberLine=new pn(this,e.addChild(new createjs.Container));break;case 3:this.timeNumberLine=new On(this,e.addChild(new createjs.Container))}null==this.settingPanel&&(this.settingPanel=new Le(this,e.addChild(this.libCloneItem("mcSetting_"+Un)),Un),this.settingPanel.onEventOK=[function(){t.settingOK()}]),Xn=this.handle.tipInputError,Ln=this.handle.calcInstance,this.handle.btnHome.visible=0==A.isEntrySub,Dn=this.handle.lineThemeDropBtn,1==A.isEntrySub&&(Dn.gotoAndStop(2),Dn.mouseEnabled=!1),(Nn=this.handle.btnTimeSys).removeAllEventListeners("click"),Nn.addEventListener("click",(function(e){t.timeSysToggle()})),(Fn=this.handle.btnReset).removeAllEventListeners("click"),Fn.addEventListener("click",(function(e){t.reset()})),(Vn=this.handle.btnTryAgain).removeAllEventListeners("click"),Vn.addEventListener("click",(function(e){t.settingOK()})),(Hn=this.handle.btnAnsZone).removeAllEventListeners("click"),Hn.addEventListener("click",(function(e){t.answerToggle()}));var n=this.handle.btnPrint;n.removeAllEventListeners("click"),n.addEventListener("click",(function(e){t.imgExport()})),Dn.title.gotoAndStop(Un-1),Nn.visible=2!=Un}},{key:"answerToggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Gn=null==t?!Gn:t,this.timeNumberLine.answerSetShow(Gn),this.btnUpdate()}},{key:"dragEnd",value:function(t){}},{key:"dragMove",value:function(t){lineEndHot.y=420;var e=lineEndHot.x,n=parseInt((e-120)/In*lineSegAnswerArr[0]);n<=0&&(n=1),n>=lineSegAnswerArr[0]&&(n=lineSegAnswerArr[0]-1),lineEndHot.x=120+n/lineSegAnswerArr[0]*In,lineSegAnswerArr[1]=n,lineSegAnswerArr[2]=lineSegAnswerArr[0]-n,lineSegValueArr.forEach((function(t,e){isNaN(t)||t==lineSegAnswerArr[e]||(lineSegValueArr[e]=lineSegAnswerArr[e])})),this.drawTextSpot(1==Gn?lineSegAnswerArr:lineSegValueArr)}},{key:"dragStart",value:function(t){}},{key:"btnUpdate",value:function(){var t,e=1==Kn;Hn.disabled.visible=e,Hn.mouseEnabled=!e,t=1==Gn?1:0,Hn.currentFrame!=t&&Hn.gotoAndStop(t),t=1==$n?1:0,Nn.currentFrame!=t&&Nn.gotoAndStop(t)}},{key:"imgDownload",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Default",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"png";n=n.toLowerCase();var r=e+"_"+Date.parse(new Date)+"."+n,i=document.createElement("a");i.style.display="none",i.href=t.toDataURL("image/jpeg"),i.download=r,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)}},{key:"imgExport",value:function(){var t=null,e=null,n=null,r=null,i=new createjs.Container,o=[this.objContainer,this.handle.drawBoard.shapeContainer];o.forEach((function(i){var o=i.getBounds();null!=o&&((null==t||t>o.x)&&(t=o.x),(null==n||n<o.x+o.width)&&(n=o.x+o.width),(null==e||e>o.y)&&(e=o.y),(null==r||r<o.y+o.height)&&(r=o.y+o.height))})),t=Math.floor(t)-4,e=Math.floor(e)-4,n=Math.ceil(n)+4,r=Math.ceil(r)+4,t<0&&(t=0),e<0&&(e=0),n>Rn&&(n=Rn),r>720&&(r=720),o.forEach((function(o){o.cache(t,e,n-t,r-e),i.addChild(new createjs.Bitmap(o.cacheCanvas))})),i.width=n-t,i.height=r-e,o.forEach((function(t){t.uncache()}));var a=this.exportCan||document.getElementById("export_canvas");null==a&&((a=document.createElement("canvas")).id="export_canvas",this.exportCan=a);var l=this.exportSta;null==l&&(l=new createjs.Stage(a),this.exportSta=l);var s=null,u=null;try{var c=i;s=s||"時間數線",u=u||"jpg",a.width=c.width,a.height=c.height,l.removeAllChildren(),"png"!=u&&l.addChild(new createjs.Shape).graphics.beginFill("#FFFFFF").drawRect(0,0,a.width,a.height).endFill(),l.addChild(c),l.update(),this.imgDownload(a,s,u)}catch(t){}}},{key:"inputFollowTarget",value:function(t){var e=t,n=e.getBounds(),r=Ln.exportRoot.getBounds(),i=(n.width+r.width)/2,o=(r.height,Rn-r.width-10),a=e.x+i,l=e.y;o<=a&&(a=e.x-i),Ln.exportRoot.x=a,Ln.exportRoot.y=l}},{key:"settingInit",value:function(){Gn=!1,this.btnUpdate(),Kn=!0,this.settingPanel.setVisible(!0)}},{key:"settingCheck",value:function(){return!0}},{key:"settingOK",value:function(){Ln.hide();var t=this.settingPanel.getData();Kn=!1,Gn=!1,$n=t.isTimeSys24,t.lineStartX=120,t.lineStartY=420,t.lineLength=In,this.btnUpdate(),this.timeNumberLine.init(t)}},{key:"timeSysToggle",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;$n=null==t?!$n:t,Nn.gotoAndStop($n?1:0),this.timeNumberLine.timeSysUpdate($n)}},{key:"tipShowError",value:function(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600;this.tipShowTween(Xn,e,(function(){null!=t&&t()}))}},{key:"tipShowTween",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.visible=!0,t.alpha=1,createjs.Tween.removeTweens(t);var r=createjs.Tween.get(t);return r.wait(e).to({alpha:0,visible:!1},300).call((function(){null!=n&&n()})),r}}])&&jn(e.prototype,n),r&&jn(e,r),o}(se);function Zn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return qn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){l=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function qn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jn,Qn,tr,er,nr,rr=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),A.appMain=this}var e,n,r;return e=t,(n=[{key:"init",value:function(t,e,n,r){A.cjs=t,A.an=e,A.exportRoot=n,A.anid=r,this.cjs=t,this.an=e,this.exportRoot=n,this.anid=r,this.isInited=!1,n&&(n.gotoAndStop(0),this.onAddedToStageBind=this.onAddedToStage.bind(this),null==n.stage?n.addEventListener("added",this.onAddedToStageBind):this.onAddedToStage(null))}},{key:"onAddedToStage",value:function(t){var e=this;if(!this.isInited){this.isInited=!0,this.toolbar=null,this.drawBoard=null,this.game=null,this.drawBoard=new I(this.cjs,this.an,this.exportRoot.getChildByName("draw_container"),this.anid),A.drawBoard=this.drawBoard;var n={drawWidth:1280,drawHeight:612,cursor:this.exportRoot.getChildByName("cursor_mc")};this.drawBoard.init(n);var r,i=Zn(this.exportRoot.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(null!=o.name){"clone_container"==o.name?this.cloneContainer=o:"pencolor_panel"==o.name&&(this.penColorPannel=new V(this,o),this.penColorPannel.onSelectedEvent.push((function(t){A.penColorIndex=e.penColorPannel.selectedIndex,e.drawBoard.setLineColor(P[A.penColorIndex])}))),"numinput_panel"==o.name?(o.visible=!1,this.calcInstance=new _t(this,o),this.calcInstance.setDragTarget(o.getChildByName("bg")),this.calcInstance.maxChars=1):"theme_panel"==o.name&&function(){o.visible=!1;var t=e.lineThemePanel=new ee(e,o);t.selectedEvents.push((function(n){null!=n&&(A.theme=parseInt(t.value),e.lineThemeDropBtn.title.gotoAndStop(A.theme-1),e.setSceneById(A.theme)),e.setLineThemePanelShow(!1)}))}();var a=o.name.split("_");"btn"==a[0]?(o.value=a[1],o.gotoAndStop(0),o.removeAllEventListeners("click"),o.mouseChildren=!1,o.cursor="pointer","AnsZone"==a[1]?(this.btnAnsZone=o,o.addEventListener("click",(function(t){e.onClick(t)}))):"home"==a[1]?(this.btnHome=o,o.addEventListener("click",(function(t){e.goBack()}))):"hour"==a[1]?this.btnTimeSys=o:"tryagain"==a[1]?(this.btnTryAgain=o,o.addEventListener("click",(function(t){e.onClick(t)}))):"reset"==a[1]?(this.btnReset=o,o.addEventListener("click",(function(t){e.onClick(t)}))):"print"==a[1]&&(this.btnPrint=o)):"dropbtn"==a[0]?(o.gotoAndStop(0),o.title=o.getChildByName("icon"),null!=o.title&&o.title.gotoAndStop(0),o.removeAllEventListeners("mousedown"),o.mouseChildren=!1,o.cursor="pointer","theme"==a[1]&&(this.lineThemeDropBtn=o,o.addEventListener("mousedown",(function(t){e.setLineThemePanelShow(0==e.lineThemeDropBtn.currentFrame)})))):"tip"==a[0]&&(o.gotoAndStop(0),o.visible=!1,"inputnum"==a[1]?this.tipInputNum=o:"inputerror"==a[1]&&(this.tipInputError=o))}}}catch(t){i.e(t)}finally{i.f()}this.getSceneById(0),this.toolbar=new It(this,this.exportRoot)}var l=A.getHtmlParams(location.search);A.htmlParams=l;var s=l.id;""<s&&(100<(s=parseInt(s))?(A.theme=parseInt(s/100),A.type=s%100):10<s?(A.theme=parseInt(s/10),A.type=s%10):(A.theme=s,A.type=0),A.isEntrySub=0<s,A.lineThemeNum=A.theme),this.setSceneById(A.theme)}},{key:"getSceneById",value:function(t){this.sceneAll=this.sceneAll||{};var e=this.sceneAll[t];if(null==e){var n,r=this.exportRoot;switch(t){case 0:n=r.getChildByName("menumain")||r.addChild(A.libCloneItem("mcMenuMain")),e=new Kt(this,n);break;case 1:case 2:case 3:(e=new Wn(this,n=r)).name="scene_"+t}this.sceneAll[t]=e}return e}},{key:"goBack",value:function(){1<A.sceneHistory.length&&A.sceneHistory.pop();var t=0==A.sceneHistory.length?null:A.sceneHistory.pop();null!=t&&this.setSceneById(t)}},{key:"onClick",value:function(t){t.currentTarget.value}},{key:"reset",value:function(){this.calcInstance.hide();var t=this.game;null!=t&&null!=t.reset&&t.reset()}},{key:"selectMenuMain",value:function(t){null!=t&&(A.theme=t+1),this.setSceneById(A.theme)}},{key:"setLineThemePanelShow",value:function(t){var e=this.lineThemeDropBtn;null!=e&&e.gotoAndStop(t?1:0);var n=this.lineThemePanel;null!=n&&(t?n.show(e):n.hide())}},{key:"setPenColorPanelShow",value:function(t){var e=this.penColorPannel;1==t&&null!=e&&e.selectedIndex!=A.penColorIndex&&(e.selectedIndex=A.penColorIndex),null!=e&&(t?e.show():e.hide())}},{key:"setSceneById",value:function(t){A.type<1&&(A.type=1),this.setPenColorPanelShow(!1),this.setLineThemePanelShow(!1),this.toolbar.reset(!1);var e=this.sceneAll||{},n=null;for(var r in e)r!==t&&null!=(n=e[r])&&null!=n.setVisible&&n.setVisible(!1);null!=(n=this.getSceneById(t))&&(A.sceneHistory.push(t),null!=n.setVisible&&n.setVisible(!0),this.game=0<t?n:null)}}])&&zn(e.prototype,n),r&&zn(e,r),t}());Jn=!(!window.attachEvent||window.opera),Qn=/webkit\/(\d+)/i.test(navigator.userAgent)&&RegExp.$1<525,tr=[],er=function(){for(var t=0;t<tr.length;t++)tr[t]()},(nr=document).ready=function(t){if(!Jn&&!Qn&&nr.addEventListener)return nr.addEventListener("DOMContentLoaded",t,!1);if(!(tr.push(t)>1))if(Jn)!function(){try{nr.documentElement.doScroll("left"),er()}catch(t){setTimeout(arguments.callee,0)}}();else if(Qn)var e=setInterval((function(){/^(loaded|complete)$/.test(nr.readyState)&&(clearInterval(e),er())}),0)},document.ready((function(){document.body.setAttribute("onload",""),document.oncontextmenu=function(t){return!1},window.onload=function(){init((function(t,e){rr.init(createjs,AdobeAn,t,e.properties.id)}))}}))}]);